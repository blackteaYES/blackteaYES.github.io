<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://blakteayes.github.io/backEnd/ElasticStack/ElasticStack.html"><meta property="og:site_name" content="çº¢èŒ¶çš„åšå®¢"><meta property="og:title" content="Elastic Stack"><meta property="og:description" content="Elastic Stack Elastic Stack ç®€ä»‹ ELKæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„æ—¥å¿—åˆ†ææ¶æ„æŠ€æœ¯æ ˆæ€»ç§°ï¼Œå®˜ç½‘ã€‚åŒ…å«ä¸‰å¤§åŸºç¡€ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Elasticsearchã€Logstashã€Kibanaã€‚ä½†å®é™…ä¸ŠELK ä¸ä»…ä»…é€‚ç”¨äºæ—¥å¿—åˆ†æï¼Œå®ƒè¿˜å¯ä»¥æ”¯æŒå…¶å®ƒä»»ä½•æ•°æ®æœç´¢ã€åˆ†æå’Œæ”¶é›†çš„åœºæ™¯ï¼Œæ—¥ å¿—åˆ†æå’Œæ”¶é›†åªæ˜¯æ›´å…·æœ‰ä»£è¡¨æ€§ã€‚å¹¶éå”¯ä¸€æ€§ã€‚ä¸‹é¢æ˜¯ELKæ¶æ„ï¼š ELKæ¶æ„å›¾"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Elastic Stack","image":[""],"dateModified":null,"author":[]}</script><title>Elastic Stack | çº¢èŒ¶çš„åšå®¢</title><meta name="description" content="Elastic Stack Elastic Stack ç®€ä»‹ ELKæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„æ—¥å¿—åˆ†ææ¶æ„æŠ€æœ¯æ ˆæ€»ç§°ï¼Œå®˜ç½‘ã€‚åŒ…å«ä¸‰å¤§åŸºç¡€ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Elasticsearchã€Logstashã€Kibanaã€‚ä½†å®é™…ä¸ŠELK ä¸ä»…ä»…é€‚ç”¨äºæ—¥å¿—åˆ†æï¼Œå®ƒè¿˜å¯ä»¥æ”¯æŒå…¶å®ƒä»»ä½•æ•°æ®æœç´¢ã€åˆ†æå’Œæ”¶é›†çš„åœºæ™¯ï¼Œæ—¥ å¿—åˆ†æå’Œæ”¶é›†åªæ˜¯æ›´å…·æœ‰ä»£è¡¨æ€§ã€‚å¹¶éå”¯ä¸€æ€§ã€‚ä¸‹é¢æ˜¯ELKæ¶æ„ï¼š ELKæ¶æ„å›¾">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-5627d575.css" as="style"><link rel="stylesheet" href="/assets/style-5627d575.css">
    <link rel="modulepreload" href="/assets/app-055e697a.js"><link rel="modulepreload" href="/assets/framework-a71e09ed.js"><link rel="modulepreload" href="/assets/ElasticStack.html-7f63f5bd.js"><link rel="modulepreload" href="/assets/ElasticStack.html-3bd17179.js"><link rel="prefetch" href="/assets/intro.html-16e8d0e8.js" as="script"><link rel="prefetch" href="/assets/index.html-ba2dbcf4.js" as="script"><link rel="prefetch" href="/assets/slides.html-62cc6305.js" as="script"><link rel="prefetch" href="/assets/disable.html-9c89cf28.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-9818d22c.js" as="script"><link rel="prefetch" href="/assets/markdown.html-3bdbabc0.js" as="script"><link rel="prefetch" href="/assets/page.html-340daa2b.js" as="script"><link rel="prefetch" href="/assets/index.html-0b260c2c.js" as="script"><link rel="prefetch" href="/assets/cherry.html-29e4c971.js" as="script"><link rel="prefetch" href="/assets/ShootingSkills.html-ba636717.js" as="script"><link rel="prefetch" href="/assets/python.html-8774188a.js" as="script"><link rel="prefetch" href="/assets/redis.html-c04daf1c.js" as="script"><link rel="prefetch" href="/assets/åˆ›é€ å‹æ¨¡å¼.html-71d666e1.js" as="script"><link rel="prefetch" href="/assets/ç»“æ„å‹æ¨¡å¼.html-977116d8.js" as="script"><link rel="prefetch" href="/assets/è¡Œä¸ºå‹æ¨¡å¼.html-376d8342.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼çš„åŸåˆ™å’Œè§„èŒƒ.html-aa59bf9a.js" as="script"><link rel="prefetch" href="/assets/vue3.html-eaff2e2b.js" as="script"><link rel="prefetch" href="/assets/webrtc.html-d386f82c.js" as="script"><link rel="prefetch" href="/assets/arthas.html-ec318312.js" as="script"><link rel="prefetch" href="/assets/Dockerå­¦ä¹ .html-a0cd5792.js" as="script"><link rel="prefetch" href="/assets/åŸºäºDockerå®ç°mysqlä¸»ä»é…ç½®.html-782b03c2.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆMinio.html-8efdec0a.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆSharding-JDBC.html-a316c704.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆWebMagic.html-fd82f5b0.js" as="script"><link rel="prefetch" href="/assets/404.html-a441863a.js" as="script"><link rel="prefetch" href="/assets/index.html-9be12deb.js" as="script"><link rel="prefetch" href="/assets/index.html-54ad4764.js" as="script"><link rel="prefetch" href="/assets/index.html-9cc5f960.js" as="script"><link rel="prefetch" href="/assets/index.html-403a4986.js" as="script"><link rel="prefetch" href="/assets/index.html-067e17af.js" as="script"><link rel="prefetch" href="/assets/index.html-06d088a6.js" as="script"><link rel="prefetch" href="/assets/index.html-9647ee4a.js" as="script"><link rel="prefetch" href="/assets/index.html-f05e8bcc.js" as="script"><link rel="prefetch" href="/assets/index.html-9a697778.js" as="script"><link rel="prefetch" href="/assets/index.html-3c2abf37.js" as="script"><link rel="prefetch" href="/assets/index.html-d253a825.js" as="script"><link rel="prefetch" href="/assets/index.html-b48469d7.js" as="script"><link rel="prefetch" href="/assets/index.html-daf66bee.js" as="script"><link rel="prefetch" href="/assets/index.html-ae129f38.js" as="script"><link rel="prefetch" href="/assets/index.html-ce737fff.js" as="script"><link rel="prefetch" href="/assets/index.html-a81a00c1.js" as="script"><link rel="prefetch" href="/assets/index.html-025c3607.js" as="script"><link rel="prefetch" href="/assets/index.html-ff597cf2.js" as="script"><link rel="prefetch" href="/assets/index.html-59e41048.js" as="script"><link rel="prefetch" href="/assets/index.html-df40bb96.js" as="script"><link rel="prefetch" href="/assets/index.html-2bf7a85e.js" as="script"><link rel="prefetch" href="/assets/index.html-341bc2d0.js" as="script"><link rel="prefetch" href="/assets/index.html-d372cf7c.js" as="script"><link rel="prefetch" href="/assets/index.html-7f9f06fe.js" as="script"><link rel="prefetch" href="/assets/index.html-f8c72864.js" as="script"><link rel="prefetch" href="/assets/index.html-b99207a0.js" as="script"><link rel="prefetch" href="/assets/index.html-1c93a3c6.js" as="script"><link rel="prefetch" href="/assets/index.html-7f6210a5.js" as="script"><link rel="prefetch" href="/assets/index.html-0f508fa4.js" as="script"><link rel="prefetch" href="/assets/index.html-62651ce2.js" as="script"><link rel="prefetch" href="/assets/index.html-a3f2a83e.js" as="script"><link rel="prefetch" href="/assets/index.html-963f658b.js" as="script"><link rel="prefetch" href="/assets/index.html-c6294f0a.js" as="script"><link rel="prefetch" href="/assets/index.html-75b5a310.js" as="script"><link rel="prefetch" href="/assets/index.html-41c14359.js" as="script"><link rel="prefetch" href="/assets/index.html-47a76b86.js" as="script"><link rel="prefetch" href="/assets/index.html-99a9b42c.js" as="script"><link rel="prefetch" href="/assets/index.html-90e985bb.js" as="script"><link rel="prefetch" href="/assets/index.html-88abc4c1.js" as="script"><link rel="prefetch" href="/assets/index.html-e7bedc62.js" as="script"><link rel="prefetch" href="/assets/index.html-b6f2199b.js" as="script"><link rel="prefetch" href="/assets/index.html-7a4ca0d3.js" as="script"><link rel="prefetch" href="/assets/index.html-ff294eae.js" as="script"><link rel="prefetch" href="/assets/index.html-7fb17921.js" as="script"><link rel="prefetch" href="/assets/index.html-d9165a56.js" as="script"><link rel="prefetch" href="/assets/index.html-bb2ae6e1.js" as="script"><link rel="prefetch" href="/assets/index.html-16e91439.js" as="script"><link rel="prefetch" href="/assets/index.html-5f71736e.js" as="script"><link rel="prefetch" href="/assets/index.html-9b949605.js" as="script"><link rel="prefetch" href="/assets/index.html-afc68251.js" as="script"><link rel="prefetch" href="/assets/index.html-ab75a382.js" as="script"><link rel="prefetch" href="/assets/index.html-c6b7d3e5.js" as="script"><link rel="prefetch" href="/assets/index.html-6155a611.js" as="script"><link rel="prefetch" href="/assets/index.html-b30c164c.js" as="script"><link rel="prefetch" href="/assets/intro.html-5b35e157.js" as="script"><link rel="prefetch" href="/assets/index.html-e46fb5a5.js" as="script"><link rel="prefetch" href="/assets/slides.html-c29c6d88.js" as="script"><link rel="prefetch" href="/assets/disable.html-e5c89080.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-26f5bcf9.js" as="script"><link rel="prefetch" href="/assets/markdown.html-7bb68332.js" as="script"><link rel="prefetch" href="/assets/page.html-bef545e2.js" as="script"><link rel="prefetch" href="/assets/index.html-bd8a5d79.js" as="script"><link rel="prefetch" href="/assets/cherry.html-a24ffdbf.js" as="script"><link rel="prefetch" href="/assets/ShootingSkills.html-beefe4c0.js" as="script"><link rel="prefetch" href="/assets/python.html-866830ed.js" as="script"><link rel="prefetch" href="/assets/redis.html-00f3c706.js" as="script"><link rel="prefetch" href="/assets/åˆ›é€ å‹æ¨¡å¼.html-00f3fc99.js" as="script"><link rel="prefetch" href="/assets/ç»“æ„å‹æ¨¡å¼.html-7db01eb6.js" as="script"><link rel="prefetch" href="/assets/è¡Œä¸ºå‹æ¨¡å¼.html-49a34e50.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼çš„åŸåˆ™å’Œè§„èŒƒ.html-4c0e0964.js" as="script"><link rel="prefetch" href="/assets/vue3.html-5061483b.js" as="script"><link rel="prefetch" href="/assets/webrtc.html-003f299e.js" as="script"><link rel="prefetch" href="/assets/arthas.html-fd877cf2.js" as="script"><link rel="prefetch" href="/assets/Dockerå­¦ä¹ .html-d54a4e5d.js" as="script"><link rel="prefetch" href="/assets/åŸºäºDockerå®ç°mysqlä¸»ä»é…ç½®.html-75484396.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆMinio.html-619dc1ea.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆSharding-JDBC.html-fd0280c4.js" as="script"><link rel="prefetch" href="/assets/SpringBootæ•´åˆWebMagic.html-069fcbd7.js" as="script"><link rel="prefetch" href="/assets/404.html-2be33ae7.js" as="script"><link rel="prefetch" href="/assets/index.html-d1fedf1d.js" as="script"><link rel="prefetch" href="/assets/index.html-157470a6.js" as="script"><link rel="prefetch" href="/assets/index.html-7a0be886.js" as="script"><link rel="prefetch" href="/assets/index.html-21134160.js" as="script"><link rel="prefetch" href="/assets/index.html-1a5a257d.js" as="script"><link rel="prefetch" href="/assets/index.html-7659f225.js" as="script"><link rel="prefetch" href="/assets/index.html-dd6e0a81.js" as="script"><link rel="prefetch" href="/assets/index.html-43a3378f.js" as="script"><link rel="prefetch" href="/assets/index.html-25d13596.js" as="script"><link rel="prefetch" href="/assets/index.html-9c163b69.js" as="script"><link rel="prefetch" href="/assets/index.html-3edb1207.js" as="script"><link rel="prefetch" href="/assets/index.html-365aaa05.js" as="script"><link rel="prefetch" href="/assets/index.html-5f4076d3.js" as="script"><link rel="prefetch" href="/assets/index.html-e18c7c01.js" as="script"><link rel="prefetch" href="/assets/index.html-eb19f134.js" as="script"><link rel="prefetch" href="/assets/index.html-649c8bee.js" as="script"><link rel="prefetch" href="/assets/index.html-db49e63c.js" as="script"><link rel="prefetch" href="/assets/index.html-5fdef5e8.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf6f951.js" as="script"><link rel="prefetch" href="/assets/index.html-95908aa3.js" as="script"><link rel="prefetch" href="/assets/index.html-ec6326fb.js" as="script"><link rel="prefetch" href="/assets/index.html-f2f9c668.js" as="script"><link rel="prefetch" href="/assets/index.html-17ab5438.js" as="script"><link rel="prefetch" href="/assets/index.html-fb5cf172.js" as="script"><link rel="prefetch" href="/assets/index.html-08a3681e.js" as="script"><link rel="prefetch" href="/assets/index.html-ae5bef17.js" as="script"><link rel="prefetch" href="/assets/index.html-ba69b243.js" as="script"><link rel="prefetch" href="/assets/index.html-8495482f.js" as="script"><link rel="prefetch" href="/assets/index.html-27e1e7f8.js" as="script"><link rel="prefetch" href="/assets/index.html-89cc4dd8.js" as="script"><link rel="prefetch" href="/assets/index.html-e41762e8.js" as="script"><link rel="prefetch" href="/assets/index.html-3ebcf483.js" as="script"><link rel="prefetch" href="/assets/index.html-582f2f4d.js" as="script"><link rel="prefetch" href="/assets/index.html-612182b2.js" as="script"><link rel="prefetch" href="/assets/index.html-28fd65f8.js" as="script"><link rel="prefetch" href="/assets/index.html-ef2de33d.js" as="script"><link rel="prefetch" href="/assets/index.html-7664a3ca.js" as="script"><link rel="prefetch" href="/assets/index.html-9b63fac2.js" as="script"><link rel="prefetch" href="/assets/index.html-6ee9d3ea.js" as="script"><link rel="prefetch" href="/assets/index.html-64d79aee.js" as="script"><link rel="prefetch" href="/assets/index.html-1a63c237.js" as="script"><link rel="prefetch" href="/assets/index.html-0a0985c7.js" as="script"><link rel="prefetch" href="/assets/index.html-8dc75b1f.js" as="script"><link rel="prefetch" href="/assets/index.html-0d3c2e35.js" as="script"><link rel="prefetch" href="/assets/index.html-276c6f3b.js" as="script"><link rel="prefetch" href="/assets/index.html-3c4e6d93.js" as="script"><link rel="prefetch" href="/assets/index.html-fa57f31b.js" as="script"><link rel="prefetch" href="/assets/index.html-0b96220c.js" as="script"><link rel="prefetch" href="/assets/index.html-876f22d9.js" as="script"><link rel="prefetch" href="/assets/index.html-7f20f840.js" as="script"><link rel="prefetch" href="/assets/index.html-3177d283.js" as="script"><link rel="prefetch" href="/assets/index.html-a8b361fa.js" as="script"><link rel="prefetch" href="/assets/index.html-f145afa5.js" as="script"><link rel="prefetch" href="/assets/index.html-eee7bd5e.js" as="script"><link rel="prefetch" href="/assets/giscus-6650c2d9.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-8764208e.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-0f32058c.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-3736a8c9.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-04fddac6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/icon.png" alt="çº¢èŒ¶çš„åšå®¢"><!----><span class="site-name hide-in-pad">çº¢èŒ¶çš„åšå®¢</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è®¾è®¡æ¨¡å¼"><span class="title"><span class="font-icon icon iconfont icon-article" style=""></span>è®¾è®¡æ¨¡å¼</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç®€è¿°</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8E%9F%E5%88%99%E5%92%8C%E8%A7%84%E8%8C%83.html" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼ç®€è¿°"><span class="font-icon icon iconfont icon-edit" style=""></span>è®¾è®¡æ¨¡å¼ç®€è¿°<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åˆ›é€ å‹æ¨¡å¼</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-simple-factory-pattern" class="nav-link" aria-label="ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-factory-method-pattern" class="nav-link" aria-label="å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-abstract-factory-pattern" class="nav-link" aria-label="æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-singleton-pattern" class="nav-link" aria-label="å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F-prototype-pattern" class="nav-link" aria-label="åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E9%80%A0%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F-builder-pattern" class="nav-link" aria-label="å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç»“æ„å‹æ¨¡å¼</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-adapter-pattern" class="nav-link" aria-label="é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F-bridge-pattern" class="nav-link" aria-label="æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F-decorator-pattern" class="nav-link" aria-label="è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F-composite-pattern" class="nav-link" aria-label="ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F-facade-pattern" class="nav-link" aria-label="å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F-flyweight-pattern" class="nav-link" aria-label="äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F-proxy-pattern" class="nav-link" aria-label="ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è¡Œä¸ºå‹æ¨¡å¼</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F-chain-of-responsibility-pattern" class="nav-link" aria-label="è´£ä»»é“¾æ¨¡å¼(Chain of Responsibility Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>è´£ä»»é“¾æ¨¡å¼(Chain of Responsibility Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F-command-pattern" class="nav-link" aria-label="å‘½ä»¤æ¨¡å¼(Command Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>å‘½ä»¤æ¨¡å¼(Command Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F-interpreter-pattern" class="nav-link" aria-label="è§£é‡Šå™¨æ¨¡å¼(Interpreter Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>è§£é‡Šå™¨æ¨¡å¼(Interpreter Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F-iterator-pattern" class="nav-link" aria-label="è¿­ä»£å™¨æ¨¡å¼(Iterator Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>è¿­ä»£å™¨æ¨¡å¼(Iterator Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F-mediator-pattern" class="nav-link" aria-label="ä¸­ä»‹è€…æ¨¡å¼(Mediator Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>ä¸­ä»‹è€…æ¨¡å¼(Mediator Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F-memento-pattern" class="nav-link" aria-label="å¤‡å¿˜å½•æ¨¡å¼(Memento Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>å¤‡å¿˜å½•æ¨¡å¼(Memento Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-observer-pattern" class="nav-link" aria-label="è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F-state-pattern" class="nav-link" aria-label="çŠ¶æ€æ¨¡å¼(State Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>çŠ¶æ€æ¨¡å¼(State Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F-strategy-pattern" class="nav-link" aria-label="ç­–ç•¥æ¨¡å¼(Strategy Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>ç­–ç•¥æ¨¡å¼(Strategy Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-template-method-pattern" class="nav-link" aria-label="æ¨¡æ¿æ–¹æ³•æ¨¡å¼(Template Method Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>æ¨¡æ¿æ–¹æ³•æ¨¡å¼(Template Method Pattern)<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F-visitor-pattern" class="nav-link" aria-label="è®¿é—®è€…æ¨¡å¼(Visitor Pattern)"><span class="font-icon icon iconfont icon-edit" style=""></span>è®¿é—®è€…æ¨¡å¼(Visitor Pattern)<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åç«¯æŠ€æœ¯åˆé›†"><span class="title"><span class="font-icon icon iconfont icon-folder" style=""></span>åç«¯æŠ€æœ¯åˆé›†</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>python</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/python/python.html" class="nav-link" aria-label="python"><span class="font-icon icon iconfont icon-edit" style=""></span>python<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>redis</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/redis/redis.html" class="nav-link" aria-label="redis"><span class="font-icon icon iconfont icon-edit" style=""></span>redis<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ElasticStack</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html" class="router-link-active router-link-exact-active nav-link active" aria-label="ElasticStackå­¦ä¹ "><span class="font-icon icon iconfont icon-edit" style=""></span>ElasticStackå­¦ä¹ <!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>springbootåˆé›†</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backEnd/java/springboot/SpringBoot%E6%95%B4%E5%90%88Minio.html" class="nav-link" aria-label="SpringBootæ•´åˆMinio"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringBootæ•´åˆMinio<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/java/springboot/SpringBoot%E6%95%B4%E5%90%88Sharding-JDBC.html" class="nav-link" aria-label="SpringBootæ•´åˆSharding-JDBC"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringBootæ•´åˆSharding-JDBC<!----></a></li><li class="dropdown-subitem"><a href="/backEnd/java/springboot/SpringBoot%E6%95%B4%E5%90%88WebMagic.html" class="nav-link" aria-label="SpringBootæ•´åˆWebMagic"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringBootæ•´åˆWebMagic<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å‰ç«¯æŠ€æœ¯åˆé›†"><span class="title"><span class="font-icon icon iconfont icon-folder" style=""></span>å‰ç«¯æŠ€æœ¯åˆé›†</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>webrtc</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/webrtc/webrtc.html" class="nav-link" aria-label="webrtcåŸºç¡€ä½¿ç”¨"><span class="font-icon icon iconfont icon-edit" style=""></span>webrtcåŸºç¡€ä½¿ç”¨<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>vue</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/vue/vue3.html" class="nav-link" aria-label="vue3å­¦ä¹ "><span class="font-icon icon iconfont icon-edit" style=""></span>vue3å­¦ä¹ <!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è¿ç»´æŠ€æœ¯åˆé›†"><span class="title"><span class="font-icon icon iconfont icon-folder" style=""></span>è¿ç»´æŠ€æœ¯åˆé›†</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>arthas</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/devops/arthas/arthas.html" class="nav-link" aria-label="arthas"><span class="font-icon icon iconfont icon-edit" style=""></span>arthas<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>docker</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/devops/docker/Docker%E5%AD%A6%E4%B9%A0.html" class="nav-link" aria-label="DockeråŸºç¡€å­¦ä¹ "><span class="font-icon icon iconfont icon-edit" style=""></span>DockeråŸºç¡€å­¦ä¹ <!----></a></li><li class="dropdown-subitem"><a href="/devops/docker/%E5%9F%BA%E4%BA%8EDocker%E5%AE%9E%E7%8E%B0mysql%E4%B8%BB%E4%BB%8E%E9%85%8D%E7%BD%AE.html" class="nav-link" aria-label="åŸºäºDockerå®ç°mysqlä¸»ä»é…ç½®"><span class="font-icon icon iconfont icon-edit" style=""></span>åŸºäºDockerå®ç°mysqlä¸»ä»é…ç½®<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ‘„å½±"><span class="title"><span class="font-icon icon iconfont icon-folder" style=""></span>æ‘„å½±</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ‘„å½±</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/shootingSkills/ShootingSkills.html" class="nav-link" aria-label="æ‘„å½±æŠ€å·§"><span class="font-icon icon iconfont icon-edit" style=""></span>æ‘„å½±æŠ€å·§<!----></a></li></ul></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">æ–‡ç« </span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/cherry.html" class="nav-link sidebar-link sidebar-page" aria-label="æµ‹è¯•æ–‡ç« "><span class="font-icon icon iconfont icon-edit" style=""></span>æµ‹è¯•æ–‡ç« <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">å‰ç«¯</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Vue</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Webrtc</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">è¿ç»´</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Arthas</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Docker</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">åç«¯</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">è®¾è®¡æ¨¡å¼</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Elastic Stack</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Elastic Stack"><!---->Elastic Stack<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stack-ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elastic Stack ç®€ä»‹"><!---->Elastic Stack ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stackç‰¹è‰²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elastic Stackç‰¹è‰²"><!---->Elastic Stackç‰¹è‰²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stackç»„ä»¶ä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elastic Stackç»„ä»¶ä»‹ç»"><!---->Elastic Stackç»„ä»¶ä»‹ç»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearch" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#logstash" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Logstash"><!---->Logstash<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#kibana" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Kibana"><!---->Kibana<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#beats" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Beats"><!---->Beats<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-cloud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elastic cloud"><!---->Elastic cloud<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearchæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elasticsearchæ˜¯ä»€ä¹ˆ"><!---->Elasticsearchæ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æœç´¢æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœç´¢æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->æœç´¢æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æ•°æ®åº“åšæœç´¢å¼Šç«¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•°æ®åº“åšæœç´¢å¼Šç«¯"><!---->æ•°æ®åº“åšæœç´¢å¼Šç«¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’Œlucene" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’ŒLucene"><!---->å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’ŒLucene<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#ä»€ä¹ˆæ˜¯elasticsearch" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä»€ä¹ˆæ˜¯Elasticsearch"><!---->ä»€ä¹ˆæ˜¯Elasticsearch<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elasticsearch çš„æ ¸å¿ƒæ¦‚å¿µ"><!---->Elasticsearch çš„æ ¸å¿ƒæ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#eså¿«é€Ÿå…¥é—¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="eså¿«é€Ÿå…¥é—¨"><!---->eså¿«é€Ÿå…¥é—¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å•†å“çš„crud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å•†å“çš„CRUD"><!---->å•†å“çš„CRUD<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æ–‡æ¡£documentå…¥é—¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–‡æ¡£Documentå…¥é—¨"><!---->æ–‡æ¡£Documentå…¥é—¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#java-api-å®ç°æ–‡æ¡£ç®¡ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Java API å®ç°æ–‡æ¡£ç®¡ç†"><!---->Java API å®ç°æ–‡æ¡£ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å›¾è§£eså†…éƒ¨æœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›¾è§£eså†…éƒ¨æœºåˆ¶"><!---->å›¾è§£eså†…éƒ¨æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶"><!---->å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Python</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Redis</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">æ‘„å½±</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/shootingSkills/ShootingSkills.html" class="nav-link sidebar-link sidebar-page" aria-label="å¦‚ä½•å­¦ä¹ æ‹æ‘„æŠ€å·§"><span class="font-icon icon iconfont icon-edit" style=""></span>å¦‚ä½•å­¦ä¹ æ‹æ‘„æŠ€å·§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="ä»‹ç»é¡µ"><span class="font-icon icon iconfont icon-info" style=""></span>ä»‹ç»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/slides.html" class="nav-link sidebar-link sidebar-page" aria-label="å¹»ç¯ç‰‡é¡µ"><span class="font-icon icon iconfont icon-slides" style=""></span>å¹»ç¯ç‰‡é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Elastic Stack</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blakteayes.github.io" target="_blank" rel="noopener noreferrer">çº¢èŒ¶</a></span><span property="author" content="çº¢èŒ¶"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 38 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT38M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stack-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">Elastic Stack ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stackç‰¹è‰²" class="router-link-active router-link-exact-active toc-link level2">Elastic Stackç‰¹è‰²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-stackç»„ä»¶ä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">Elastic Stackç»„ä»¶ä»‹ç»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearch" class="router-link-active router-link-exact-active toc-link level3">Elasticsearch</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#logstash" class="router-link-active router-link-exact-active toc-link level3">Logstash</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#kibana" class="router-link-active router-link-exact-active toc-link level3">Kibana</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#beats" class="router-link-active router-link-exact-active toc-link level3">Beats</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elastic-cloud" class="router-link-active router-link-exact-active toc-link level3">Elastic cloud</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearchæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">Elasticsearchæ˜¯ä»€ä¹ˆ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æœç´¢æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">æœç´¢æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æ•°æ®åº“åšæœç´¢å¼Šç«¯" class="router-link-active router-link-exact-active toc-link level3">æ•°æ®åº“åšæœç´¢å¼Šç«¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’Œlucene" class="router-link-active router-link-exact-active toc-link level3">å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’ŒLucene</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#ä»€ä¹ˆæ˜¯elasticsearch" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯Elasticsearch</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">Elasticsearch çš„æ ¸å¿ƒæ¦‚å¿µ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#eså¿«é€Ÿå…¥é—¨" class="router-link-active router-link-exact-active toc-link level2">eså¿«é€Ÿå…¥é—¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å•†å“çš„crud" class="router-link-active router-link-exact-active toc-link level3">å•†å“çš„CRUD</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#æ–‡æ¡£documentå…¥é—¨" class="router-link-active router-link-exact-active toc-link level3">æ–‡æ¡£Documentå…¥é—¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#java-api-å®ç°æ–‡æ¡£ç®¡ç†" class="router-link-active router-link-exact-active toc-link level3">Java API å®ç°æ–‡æ¡£ç®¡ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å›¾è§£eså†…éƒ¨æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">å›¾è§£eså†…éƒ¨æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backEnd/ElasticStack/ElasticStack.html#å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="elastic-stack" tabindex="-1"><a class="header-anchor" href="#elastic-stack" aria-hidden="true">#</a> Elastic Stack</h1><h2 id="elastic-stack-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#elastic-stack-ç®€ä»‹" aria-hidden="true">#</a> Elastic Stack ç®€ä»‹</h2><p>ELKæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„æ—¥å¿—åˆ†ææ¶æ„æŠ€æœ¯æ ˆæ€»ç§°ï¼Œ<a href="https://www.elastic.co/cn/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚åŒ…å«ä¸‰å¤§åŸºç¡€ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Elasticsearchã€Logstashã€Kibanaã€‚ä½†å®é™…ä¸ŠELK ä¸ä»…ä»…é€‚ç”¨äºæ—¥å¿—åˆ†æï¼Œå®ƒè¿˜å¯ä»¥æ”¯æŒå…¶å®ƒä»»ä½•æ•°æ®æœç´¢ã€åˆ†æå’Œæ”¶é›†çš„åœºæ™¯ï¼Œæ—¥ å¿—åˆ†æå’Œæ”¶é›†åªæ˜¯æ›´å…·æœ‰ä»£è¡¨æ€§ã€‚å¹¶éå”¯ä¸€æ€§ã€‚ä¸‹é¢æ˜¯ELKæ¶æ„ï¼š</p><figure><img src="/assets/img/ElasticStack/ELKæ¶æ„å›¾.png" alt="ELKæ¶æ„å›¾" tabindex="0" loading="lazy"><figcaption>ELKæ¶æ„å›¾</figcaption></figure><p>éšç€elkçš„å‘å±•ï¼Œåˆæœ‰æ–°æˆå‘˜Beatsã€elastic cloudçš„åŠ å…¥ï¼Œæ‰€ä»¥å°±å½¢æˆäº† Elastic Stackã€‚æ‰€ä»¥è¯´ï¼ŒELKæ˜¯Iæ—§çš„ç§°å‘¼ï¼ŒElastic Stackæ˜¯æ–°çš„åå­—ã€‚</p><figure><img src="/assets/img/ElasticStack/ElasticStackæ¶æ„å›¾.png" alt="ElasticStackæ¶æ„å›¾" tabindex="0" loading="lazy"><figcaption>ElasticStackæ¶æ„å›¾</figcaption></figure><h2 id="elastic-stackç‰¹è‰²" tabindex="-1"><a class="header-anchor" href="#elastic-stackç‰¹è‰²" aria-hidden="true">#</a> Elastic Stackç‰¹è‰²</h2><ul><li><p>å¤„ç†æ–¹å¼çµæ´»ï¼šelasticsearchæ˜¯ç›®å‰æœ€æµè¡Œçš„å‡†å®æ—¶å…¨æ–‡æ£€ç´¢å¼•æ“ï¼Œå…·æœ‰ é«˜é€Ÿæ£€ç´¢å¤§æ•°æ®çš„èƒ½åŠ›ã€‚</p></li><li><p>é…ç½®ç®€å•ï¼šå®‰è£…kçš„æ¯ä¸ªç»„ä»¶ï¼Œä»…éœ€é…ç½®æ¯ä¸ªç»„ä»¶çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶å³å¯ã€‚</p><p>ä¿®æ”¹å¤„ä¸å¤šï¼Œå› ä¸ºå¤§é‡å‚æ•°å·²ç»é»˜è®¤é…åœ¨ç³»ç»Ÿä¸­ï¼Œä¿®æ”¹æƒ³è¦ä¿®æ”¹çš„é€‰é¡¹å³ å¯ã€‚</p></li><li><p>æ¥å£ç®€å•ï¼šé‡‡ç”¨jsonå½¢å¼RESTFUL APIæ¥å—æ•°æ®å¹¶å“åº”ï¼Œæ— å…³è¯­è¨€ã€‚</p></li><li><p>æ€§èƒ½é«˜æ•ˆï¼šelasticsearch:åŸºäºä¼˜ç§€çš„å…¨æ–‡æœç´¢æŠ€æœ¯Lucene,é‡‡ç”¨å€’æ’ç´¢ å¼•ï¼Œå¯ä»¥è½»æ˜“åœ°åœ¨ç™¾äº¿çº§åˆ«æ•°æ®é‡ä¸‹ï¼Œæœç´¢å‡ºæƒ³è¦çš„å†…å®¹ï¼Œå¹¶ä¸”æ˜¯ç§’çº§å“ åº”ã€‚</p></li><li><p>çµæ´»æ‰©å±•ï¼šelasticsearchiå’Œlogstashéƒ½å¯ä»¥æ ¹æ®é›†ç¾¤è§„æ¨¡çº¿æ€§æ‹“å±•ï¼Œ elasticsearchå†…éƒ¨è‡ªåŠ¨å®ç°é›†ç¾¤åä½œã€‚</p></li><li><p>æ•°æ®å±•ç°åä¸½ï¼škibanaä½œä¸ºå‰ç«¯å±•ç°å·¥å…·ï¼Œå›¾è¡¨åä¸½ï¼Œé…ç½®ç®€å•ã€‚</p></li></ul><h2 id="elastic-stackç»„ä»¶ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#elastic-stackç»„ä»¶ä»‹ç»" aria-hidden="true">#</a> Elastic Stackç»„ä»¶ä»‹ç»</h2><h3 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch" aria-hidden="true">#</a> Elasticsearch</h3><p>Elasticsearchæ˜¯ä½¿ç”¨javaå¼€å‘ï¼ŒåŸºäºLuceneã€åˆ†å¸ƒå¼ã€é€šè¿‡Restful)æ–¹å¼è¿›è¡Œ äº¤äº’çš„è¿‘å®æ—¶æœç´¢å¹³å°æ¡†æ¶ã€‚å®ƒçš„ç‰¹ç‚¹æœ‰ï¼šåˆ†å¸ƒå¼ï¼Œé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°ï¼Œç´¢å¼•è‡ªåŠ¨ åˆ†ç‰‡ï¼Œç´¢å¼•å‰¯æœ¬æœºåˆ¶ï¼Œrestfulé£æ ¼æ¥å£ï¼Œå¤šæ•°æ®æºï¼Œè‡ªåŠ¨æœç´¢è´Ÿè½½ç­‰ã€‚</p><h3 id="logstash" tabindex="-1"><a class="header-anchor" href="#logstash" aria-hidden="true">#</a> Logstash</h3><p>LogstashåŸºäºjavaå¼€å‘ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®æŠ½å–è½¬åŒ–å·¥å…·ã€‚ä¸€èˆ¬å·¥ä½œæ–¹å¼ä¸ºc/sæ¶ æ„ï¼Œclientiç«¯å®‰è£…åœ¨éœ€è¦æ”¶é›†ä¿¡æ¯çš„ä¸»æœºä¸Šï¼Œserveriç«¯è´Ÿè´£å°†æ”¶åˆ°çš„å„èŠ‚ç‚¹æ—¥å¿—è¿› è¡Œè¿‡æ»¤ã€ä¿®æ”¹ç­‰æ“ä½œåœ¨ä¸€å¹¶å‘å¾€elasticsearchæˆ–å…¶ä»–ç»„ä»¶ä¸Šå»ã€‚</p><h3 id="kibana" tabindex="-1"><a class="header-anchor" href="#kibana" aria-hidden="true">#</a> Kibana</h3><p>KibanaåŸºäºnodejs,ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºå’Œå…è´¹çš„å¯è§†åŒ–å·¥å…·ã€‚Kibanaiå¯ä»¥ä¸º Logstashå’ŒElasticSearchæä¾›çš„æ—¥å¿—åˆ†æå‹å¥½çš„Webç•Œé¢ï¼Œå¯ä»¥æ±‡æ€»ã€åˆ†æå’Œ æœç´¢é‡è¦æ•°æ®æ—¥å¿—ã€‚</p><h3 id="beats" tabindex="-1"><a class="header-anchor" href="#beats" aria-hidden="true">#</a> Beats</h3><p>Beatså¹³å°é›†åˆäº†å¤šç§å•ä¸€ç”¨é€”æ•°æ®é‡‡é›†å™¨ã€‚å®ƒä»¬ä»æˆç™¾ä¸Šåƒæˆ–æˆåƒä¸Šä¸‡å°æœº å™¨å’Œç³»ç»Ÿå‘Logstashæˆ–Elasticsearchå‘é€æ•°æ®ã€‚</p><h4 id="beatsç”±å¦‚ä¸‹ç»„æˆ" tabindex="-1"><a class="header-anchor" href="#beatsç”±å¦‚ä¸‹ç»„æˆ" aria-hidden="true">#</a> Beatsç”±å¦‚ä¸‹ç»„æˆ</h4><h5 id="packetbeat" tabindex="-1"><a class="header-anchor" href="#packetbeat" aria-hidden="true">#</a> Packetbeat</h5><p>è½»é‡å‹ç½‘ç»œæ•°æ®é‡‡é›†å™¨ï¼Œç”¨äºæ·±æŒ–ç½‘çº¿ä¸Šä¼ è¾“çš„æ•°æ®ï¼Œäº†è§£åº” ç”¨ç¨‹åºåŠ¨æ€ã€‚Packetbeatæ˜¯ä¸€æ¬¾è½»é‡å‹ç½‘ç»œæ•°æ®åŒ…åˆ†æå™¨ï¼Œèƒ½å¤Ÿå°†æ•°æ®å‘é€è‡³ Logstashæˆ–Elasticsearchã€‚å…¶æ”¯æŒICMP(v4andv6)ã€DNSã€HTTPã€Mysql.. PostgreSQLã€Redisã€MongoDBã€Memcacheç­‰tåè®®ã€‚</p><h5 id="filebeat" tabindex="-1"><a class="header-anchor" href="#filebeat" aria-hidden="true">#</a> Filebeat</h5><p>è½»é‡å‹æ—¥å¿—é‡‡é›†å™¨ã€‚å½“æ‚¨è¦é¢å¯¹æˆç™¾ä¸Šåƒã€ç”šè‡³æˆåƒä¸Šä¸‡çš„æœåŠ¡ å™¨ã€è™šæ‹Ÿæœºå’Œå®¹å™¨ç”Ÿæˆçš„æ—¥å¿—æ—¶ï¼Œè¯·å‘Šåˆ«SSHå§ã€‚Filebeatå°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹ æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚</p><h5 id="metricbeat" tabindex="-1"><a class="header-anchor" href="#metricbeat" aria-hidden="true">#</a> Metricbeat</h5><p>è½»é‡å‹æŒ‡æ ‡é‡‡é›†å™¨ã€‚Metricbeatèƒ½å¤Ÿä»¥ä¸€ç§è½»é‡å‹çš„æ–¹å¼ï¼Œ è¾“é€å„ç§ç³»ç»Ÿå’ŒæœåŠ¡ç»Ÿè®¡æ•°æ®ï¼Œä»CPUåˆ°å†…å­˜ï¼Œä»Redisåˆ°Nginx,ä¸ä¸€è€Œè¶³ã€‚ å¯å®šæœŸè·å–å¤–éƒ¨ç³»ç»Ÿçš„ç›‘æ§æŒ‡æ ‡ä¿¡æ¯ï¼Œå…¶å¯ä»¥ç›‘æ§ã€æ”¶é›†Apache httpã€ HAProxyã€MongoDBã€MySQLã€Nginxã€PostgreSQLã€Redisã€System Zookeeperç­‰æœåŠ¡ã€‚</p><h5 id="winlogbeat" tabindex="-1"><a class="header-anchor" href="#winlogbeat" aria-hidden="true">#</a> Winlogbeat</h5><p>è½»é‡å‹Windowsäº‹ä»¶æ—¥å¿—é‡‡é›†å™¨ã€‚ç”¨äºå¯†åˆ‡ç›‘æ§åŸºäº Windowsçš„åŸºç¡€è®¾æ–½ä¸Šå‘ç”Ÿçš„äº‹ä»¶ã€‚Winlogbeatèƒ½å¤Ÿä»¥ä¸€ç§è½»é‡å‹çš„æ–¹å¼ï¼Œå°† Windowsäº‹ä»¶æ—¥å¿—å®æ—¶åœ°æµå¼ä¼ è¾“è‡³Elasticsearchå’ŒLogstashã€‚</p><h5 id="auditbeat" tabindex="-1"><a class="header-anchor" href="#auditbeat" aria-hidden="true">#</a> Auditbeat</h5><p>è½»é‡å‹å®¡è®¡æ—¥å¿—é‡‡é›†å™¨ã€‚æ”¶é›†æ‚¨Linuxå®¡è®¡æ¡†æ¶çš„æ•°æ®ï¼Œç›‘æ§ æ–‡ä»¶å®Œæ•´æ€§ã€‚Auditbeatå®æ—¶é‡‡é›†è¿™äº›äº‹ä»¶ï¼Œç„¶åå‘é€åˆ°Elastic Stackå…¶ä»–éƒ¨åˆ†åš è¿›ä¸€æ­¥åˆ†æã€‚</p><h5 id="heartbeat" tabindex="-1"><a class="header-anchor" href="#heartbeat" aria-hidden="true">#</a> Heartbeat</h5><p>é¢å‘è¿è¡ŒçŠ¶æ€ç›‘æµ‹çš„è½»é‡å‹é‡‡é›†å™¨ã€‚é€šè¿‡ä¸»åŠ¨æ¢æµ‹æ¥ç›‘æµ‹æœåŠ¡ çš„å¯ç”¨æ€§ã€‚é€šè¿‡ç»™å®šURLåˆ—è¡¨ï¼ŒHeartbeatä»…ä»…è¯¢é—®ï¼šç½‘ç«™è¿è¡Œæ­£å¸¸å—ï¼Ÿ Heartbeatä¼šå°†æ­¤ä¿¡æ¯å’Œå“åº”æ—¶é—´å‘é€è‡³Elasticçš„å…¶ä»–éƒ¨åˆ†ï¼Œä»¥è¿›è¡Œè¿›ä¸€æ­¥åˆ† æã€‚</p><h5 id="functionbeat" tabindex="-1"><a class="header-anchor" href="#functionbeat" aria-hidden="true">#</a> Functionbeat</h5><p>é¢å‘äº‘ç«¯æ•°æ®çš„æ— æœåŠ¡å™¨é‡‡é›†å™¨ã€‚åœ¨ä½œä¸ºä¸€é¡¹åŠŸèƒ½éƒ¨ç½²åœ¨äº‘ æœåŠ¡æä¾›å•†çš„åŠŸèƒ½å³æœåŠ¡(FaaS)å¹³å°ä¸Šåï¼ŒFunctionbeatå³èƒ½æ”¶é›†ã€ä¼ é€å¹¶ç›‘æµ‹ æ¥è‡ªæ‚¨çš„äº‘æœåŠ¡çš„ç›¸å…³æ•°æ®ã€‚</p><h3 id="elastic-cloud" tabindex="-1"><a class="header-anchor" href="#elastic-cloud" aria-hidden="true">#</a> Elastic cloud</h3><p>åŸºäºElasticsearchçš„è½¯ä»¶å³æœåŠ¡(Saas)è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡Elasticçš„å®˜æ–¹åˆä½œä¼™ ä¼´ä½¿ç”¨æ‰˜ç®¡çš„ElasticsearchæœåŠ¡ã€‚</p><h2 id="elasticsearchæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#elasticsearchæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> Elasticsearchæ˜¯ä»€ä¹ˆ</h2><h3 id="æœç´¢æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æœç´¢æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æœç´¢æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ¦‚å¿µï¼šç”¨æˆ·è¾“å…¥æƒ³è¦çš„å…³é”®è¯ï¼Œè¿”å›å«æœ‰è¯¥å…³é”®è¯çš„æ‰€æœ‰ä¿¡æ¯ã€‚ åœºæ™¯ï¼š</p><ul><li>äº’è”ç½‘æœç´¢ï¼šè°·æ­Œã€ç™¾åº¦ã€å„ç§æ–°é—»é¦–é¡µï¼›</li><li>ç«™å†…æœç´¢ï¼ˆå‚ç›´æœç´¢ï¼‰ï¼šä¼ä¸šOAæŸ¥è¯¢è®¢å•ã€äººå‘˜ã€éƒ¨é—¨ï¼Œç”µå•†ç½‘ç«™å†…éƒ¨æœç´¢å•†å“ï¼ˆæ·˜å®ã€äº¬ä¸œï¼‰åœºæ™¯ã€‚</li></ul><h3 id="æ•°æ®åº“åšæœç´¢å¼Šç«¯" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“åšæœç´¢å¼Šç«¯" aria-hidden="true">#</a> æ•°æ®åº“åšæœç´¢å¼Šç«¯</h3><h4 id="ç«™å†…æœç´¢-å‚ç›´æœç´¢" tabindex="-1"><a class="header-anchor" href="#ç«™å†…æœç´¢-å‚ç›´æœç´¢" aria-hidden="true">#</a> ç«™å†…æœç´¢ï¼ˆå‚ç›´æœç´¢ï¼‰</h4><p>æ•°æ®é‡å°ï¼Œç®€å•æœç´¢ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®åº“ã€‚</p><h5 id="é—®é¢˜å‡ºç°" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜å‡ºç°" aria-hidden="true">#</a> é—®é¢˜å‡ºç°</h5><ul><li><p>å­˜å‚¨é—®é¢˜ã€‚</p><p>ç”µå•†ç½‘ç«™å•†å“ä¸Šäº¿æ¡æ—¶ï¼Œæ¶‰åŠåˆ°å•è¡¨æ•°æ®è¿‡å¤§å¿…é¡»æ‹†åˆ†è¡¨ï¼Œæ•°æ® åº“ç£ç›˜å ç”¨è¿‡å¤§å¿…é¡»åˆ†åº“(mycat)ã€‚</p></li><li><p>æ€§èƒ½é—®é¢˜ã€‚</p><p>è§£å†³ä¸Šé¢é—®é¢˜åï¼ŒæŸ¥è¯¢â€œç¬”è®°æœ¬ç”µè„‘â€ç­‰å…³é”®è¯æ—¶ï¼Œä¸Šäº¿æ¡æ•°æ®çš„ å•†å“åå­—æ®µé€è¡Œæ‰«æï¼Œæ€§èƒ½è·Ÿä¸ä¸Šã€‚</p></li><li><p>ä¸èƒ½åˆ†è¯ã€‚</p><p>å¦‚æœç´¢â€œç¬”è®°æœ¬ç”µè„‘â€ï¼Œåªèƒ½æœç´¢å®Œå…¨å’Œå…³é”®è¯ä¸€æ ·çš„æ•°æ®ï¼Œé‚£ä¹ˆ æ•°æ®é‡å°æ—¶ï¼Œæœç´¢â€œç¬”è®°ç”µè„‘â€ï¼Œâ€œç”µè„‘&quot;æ•°æ®è¦ä¸è¦ç»™ç”¨æˆ·ã€‚</p></li></ul><h5 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h5><p>äº’è”ç½‘æœç´¢ï¼Œè‚¯å®šä¸ä¼šä½¿ç”¨æ•°æ®åº“æœç´¢ã€‚æ•°æ®é‡å¤ªå¤§ã€‚PBçº§ã€‚</p><h3 id="å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’Œlucene" tabindex="-1"><a class="header-anchor" href="#å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’Œlucene" aria-hidden="true">#</a> å…¨æ–‡æ£€ç´¢ã€å€’æ’ç´¢å¼•å’ŒLucene</h3><h5 id="å…¨æ–‡æ£€ç´¢" tabindex="-1"><a class="header-anchor" href="#å…¨æ–‡æ£€ç´¢" aria-hidden="true">#</a> å…¨æ–‡æ£€ç´¢</h5><p>å€’æ’ç´¢å¼•ã€‚æ•°æ®å­˜å‚¨æ—¶ï¼Œç»è¡Œåˆ†è¯å»ºç«‹termç´¢å¼•åº“ã€‚</p><figure><img src="/assets/img/ElasticStack/å»ºç«‹termç´¢å¼•åº“.png" alt="å»ºç«‹termç´¢å¼•åº“" tabindex="0" loading="lazy"><figcaption>å»ºç«‹termç´¢å¼•åº“</figcaption></figure><p>å€’æ’ç´¢å¼•æºäºå®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®å±æ€§çš„å€¼æ¥æŸ¥æ‰¾è®°å½•ã€‚è¿™ç§ç´¢å¼•è¡¨ä¸­çš„æ¯ä¸€ é¡¹éƒ½åŒ…æ‹¬ä¸€ä¸ªå±æ€§å€¼å’Œå…·æœ‰è¯¥å±æ€§å€¼çš„å„è®°å½•çš„åœ°å€ã€‚ç”±äºä¸æ˜¯ç”±è®°å½•æ¥ç¡®å®šå±æ€§ å€¼ï¼Œè€Œæ˜¯ç”±å±æ€§å€¼æ¥ç¡®å®šè®°å½•çš„ä½ç½®ï¼Œå› è€Œç§°ä¸ºå€’æ’ç´¢å¼•(inverted index)ã€‚å¸¦æœ‰å€’ æ’ç´¢å¼•çš„æ–‡ä»¶æˆ‘ä»¬ç§°ä¸ºå€’æ’ç´¢å¼•æ–‡ä»¶ï¼Œç®€ç§°å€’æ’æ–‡ä»¶(inverted file)ã€‚</p><h5 id="lucene" tabindex="-1"><a class="header-anchor" href="#lucene" aria-hidden="true">#</a> Lucene</h5><p>å°±æ˜¯ä¸€ä»¬råŒ…ï¼Œé‡Œé¢å°è£…äº†å…¨æ–‡æ£€ç´¢çš„å¼•æ“ã€æœç´¢çš„ç®—æ³•ä»£ç ã€‚å¼€å‘æ—¶ï¼Œå¼•å…¥ lucenelçš„jaråŒ…ï¼Œé€šè¿‡apiå¼€å‘æœç´¢ç›¸å…³ä¸šåŠ¡ã€‚åº•å±‚ä¼šåœ¨ç£ç›˜å»ºç«‹ç´¢å¼•åº“ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯elasticsearch" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯elasticsearch" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯Elasticsearch</h3><h4 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a> ç®€ä»‹</h4><p>ElasticSearch:æ˜¯ä¸€ä¸ªåŸºäºLuceneçš„æœç´¢æœåŠ¡å™¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼å¤šç”¨æˆ· èƒ½åŠ›çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŸºäºRESTful web æ¥å£ã€‚ <a href="https://www.elastic.co/cn/what-is/elasticsearch" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="/assets/img/ElasticStack/Elasticsearch.png" alt="Elasticsearch" tabindex="0" loading="lazy"><figcaption>Elasticsearch</figcaption></figure><h4 id="elasticsearchçš„åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#elasticsearchçš„åŠŸèƒ½" aria-hidden="true">#</a> Elasticsearchçš„åŠŸèƒ½</h4><ul><li><p>åˆ†å¸ƒå¼çš„æœç´¢å¼•æ“å’Œæ•°æ®åˆ†æå¼•</p><p>æœç´¢ï¼šäº’è”ç½‘æœç´¢ã€ç”µå•†ç½‘ç«™ç«™å†…æœç´¢ã€OAç³»ç»ŸæŸ¥è¯¢ æ•°æ®åˆ†æï¼šç”µå•†ç½‘ç«™æŸ¥è¯¢è¿‘ä¸€å‘¨å“ªäº›å“ç±»çš„å›¾ä¹¦é”€å”®å‰åï¼šæ–°é—»ç½‘ç«™ï¼Œæœ€è¿‘3 å¤©é˜…è¯»é‡æœ€é«˜çš„åä¸ªå…³é”®è¯ï¼Œèˆ†æƒ…åˆ†æã€‚</p></li><li><p>å…¨æ–‡æ£€ç´¢ï¼Œç»“æ„åŒ–æ£€ç´¢ï¼Œæ•°æ®åˆ†æ å…¨æ–‡æ£€ç´¢ï¼šæœç´¢å•†å“åç§°åŒ…å«javaçš„å›¾ä¹¦select<em>from books where book_name like &quot;%java%&quot; ç»“æ„åŒ–æ£€ç´¢ï¼šæœç´¢å•†å“åˆ†ç±»ä¸ºspringçš„å›¾ä¹¦éƒ½æœ‰å“ªäº›ï¼Œselect</em>from books where category_id=&#39;spring&#39; æ•°æ®åˆ†æï¼šåˆ†ææ¯ä¸€ä¸ªåˆ†ç±»ä¸‹æœ‰å¤šå°‘ç§å›¾ä¹¦ï¼Œselect category_id,count(*) from books group by category_id</p></li><li><p>å¯¹æµ·é‡æ•°æ®è¿›è¡Œè¿‘å®æ—¶çš„å¤„ç† åˆ†å¸ƒå¼ï¼šESè‡ªåŠ¨å¯ä»¥å°†æµ·é‡æ•°æ®åˆ†æ•£åˆ°å¤šå°æœåŠ¡å™¨ä¸Šå»å­˜å‚¨å’Œæ£€ç´¢ï¼Œç»è¡Œå¹¶è¡ŒæŸ¥ è¯¢ï¼Œæé«˜æœç´¢æ•ˆç‡ã€‚ç›¸å¯¹çš„ï¼ŒLuceneæ˜¯å•æœºåº”ç”¨ã€‚ è¿‘å®æ—¶ï¼šæ•°æ®åº“ä¸Šäº¿æ¡æ•°æ®æŸ¥è¯¢ï¼Œæœç´¢ä¸€æ¬¡è€—æ—¶å‡ ä¸ªå°æ—¶ï¼Œæ˜¯æ‰¹å¤„ç†(batch- processing)ã€‚è€Œesåªéœ€ç§’çº§å³å¯æŸ¥è¯¢æµ·é‡æ•°æ®ï¼Œæ‰€ä»¥å«è¿‘å®æ—¶ã€‚ç§’çº§ã€‚</p></li></ul><figure><img src="/assets/img/ElasticStack/lucene-eséƒ¨ç½².png" alt="lucene-eséƒ¨ç½²" tabindex="0" loading="lazy"><figcaption>lucene-eséƒ¨ç½²</figcaption></figure><h4 id="elasticsearch-çš„ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#elasticsearch-çš„ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a> Elasticsearch çš„ä½¿ç”¨åœºæ™¯</h4><p>å›½å¤–ï¼š</p><ul><li>ç»´åŸºç™¾ç§‘ï¼Œç±»ä¼¼ç™¾åº¦ç™¾ç§‘ï¼Œâ€œç½‘ç»œä¸ƒå±‚åè®®&quot;çš„ç»´åŸºç™¾ç§‘ï¼Œå…¨æ–‡æ£€ç´¢ï¼Œé«˜äº®ï¼Œ æœç´¢æ¨è</li><li>Stack Overflow(å›½å¤–çš„ç¨‹åºè®¨è®ºè®ºå›)ï¼Œç›¸å½“äºç¨‹åºå‘˜çš„è´´å§ã€‚é‡åˆ°ité—® é¢˜å»ä¸Šé¢å‘å¸–ï¼Œçƒ­å¿ƒç½‘å‹ä¸‹é¢å›å¸–è§£ç­”ã€‚</li><li>GitHub(å¼€æºä»£ç ç®¡ç†)ï¼Œæœç´¢ä¸Šåƒäº¿è¡Œä»£ç ã€‚</li><li>ç”µå•†ç½‘ç«™ï¼Œæ£€ç´¢å•†å“</li><li>æ—¥å¿—æ•°æ®åˆ†æï¼Œlogstashé‡‡é›†æ—¥å¿—ï¼ŒESè¿›è¡Œå¤æ‚çš„æ•°æ®åˆ†æ(ELKæŠ€æœ¯ï¼Œ elasticsearch+logstash+kibana</li><li>å•†å“ä»·æ ¼ç›‘æ§ç½‘ç«™ï¼Œç”¨æˆ·è®¾å®šæŸå•†å“çš„ä»·æ ¼é˜ˆå€¼ï¼Œå½“ä½äºè¯¥é˜ˆå€¼çš„æ—¶å€™ï¼Œå‘ é€é€šçŸ¥æ¶ˆæ¯ç»™ç”¨æˆ·ï¼Œæ¯”å¦‚è¯´è®¢é˜…ã€Šjvaç¼–ç¨‹æ€æƒ³ã€‹çš„ç›‘æ§ï¼Œå¦‚æœä»·æ ¼ä½äº 27å—é’±ï¼Œå°±é€šçŸ¥æˆ‘ï¼Œæˆ‘å°±å»ä¹°ã€‚</li><li>BIç³»ç»Ÿï¼Œå•†ä¸šæ™ºèƒ½(Business Intelligence)ã€‚å¤§å‹è¿é”è¶…å¸‚ï¼Œåˆ†æå…¨å›½ç½‘ ç‚¹ä¼ å›çš„æ•°æ®ï¼Œåˆ†æå„ä¸ªå•†å“åœ¨ä»€ä¹ˆå­£èŠ‚çš„é”€å”®é‡æœ€å¥½ã€åˆ©æ¶¦æœ€é«˜ã€‚æˆæœ¬ç®¡ ç†ï¼Œåº—é¢ç§Ÿé‡‘ã€å‘˜å·¥å·¥èµ„ã€è´Ÿå€ºç­‰ä¿¡æ¯è¿›è¡Œåˆ†æã€‚ä»è€Œéƒ¨ç½²ä¸‹ä¸€ä¸ªé˜¶æ®µçš„æˆ˜ ç•¥ç›®æ ‡ã€‚</li></ul><p>å›½å†…ï¼š</p><ul><li>ç™¾åº¦æœç´¢ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œä½¿ç”¨esã€‚</li><li>OAã€ERPç³»ç»Ÿç«™å†…æœç´¢ã€‚</li></ul><h4 id="elasticsearchçš„ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#elasticsearchçš„ç‰¹ç‚¹" aria-hidden="true">#</a> Elasticsearchçš„ç‰¹ç‚¹</h4><ul><li>å¯æ‹“å±•æ€§ï¼šå¤§å‹åˆ†å¸ƒå¼é›†ç¾¤ï¼ˆæ•°ç™¾å°æœåŠ¡å™¨ï¼‰æŠ€æœ¯ï¼Œå¤„ç†PBçº§æ•°æ®ï¼Œå¤§å…¬ å¸å¯ä»¥ä½¿ç”¨ã€‚å°å…¬å¸æ•°æ®é‡å°ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨å•æœºã€‚å¤§æ•°æ®é¢†åŸŸä½¿ç”¨å¹¿æ³›ã€‚</li><li>æŠ€æœ¯æ•´åˆï¼šå°†å…¨æ–‡æ£€ç´¢ã€æ•°æ®åˆ†æã€åˆ†å¸ƒå¼ç›¸å…³æŠ€æœ¯æ•´åˆåœ¨ä¸€èµ·ï¼š lucene(å…¨æ–‡æ£€ç´¢)ï¼Œå•†ç”¨çš„æ•°æ®åˆ†æè½¯ä»¶ï¼ˆBè½¯ä»¶)ï¼Œåˆ†å¸ƒå¼æ•°æ®åº“ mycat</li><li>éƒ¨ç½²ç®€å•ï¼šå¼€ç®±å³ç”¨ï¼Œå¾ˆå¤šé»˜è®¤é…ç½®ä¸éœ€å…³å¿ƒï¼Œè§£å‹å®Œæˆç›´æ¥è¿è¡Œå³å¯ã€‚æ‹“ å±•æ—¶ï¼Œåªéœ€å¤šéƒ¨ç½²å‡ ä¸ªå®ä¾‹å³å¯ï¼Œè´Ÿè½½å‡è¡¡ã€åˆ†ç‰‡è¿ç§»é›†ç¾¤å†…éƒ¨è‡ªå·±å®æ–½ã€‚</li><li>æ¥å£ç®€å•ï¼šä½¿ç”¨restful apiç»è¡Œäº¤äº’ï¼Œè·¨è¯­è¨€ã€‚</li><li>åŠŸèƒ½å¼ºå¤§ï¼šElasticsearchä½œä¸ºä¼ ç»Ÿæ•°æ®åº“çš„ä¸€ä¸ªè¡¥å……ï¼Œæä¾›äº†æ•°æ®åº“æ‰€ä¸ä¸ èƒ½æä¾›çš„å¾ˆå¤šåŠŸèƒ½ï¼Œå¦‚å…¨æ–‡æ£€ç´¢ï¼ŒåŒä¹‰è¯å¤„ç†ï¼Œç›¸å…³åº¦æ’åã€‚</li></ul><figure><img src="/assets/img/ElasticStack/Elasticsearchçš„ç‰¹ç‚¹.png" alt="Elasticsearchçš„ç‰¹ç‚¹" tabindex="0" loading="lazy"><figcaption>Elasticsearchçš„ç‰¹ç‚¹</figcaption></figure><h3 id="elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true">#</a> Elasticsearch çš„æ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="luceneå’Œelasticsearchçš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#luceneå’Œelasticsearchçš„å…³ç³»" aria-hidden="true">#</a> luceneå’Œelasticsearchçš„å…³ç³»</h4><p>Lucene:æœ€å…ˆè¿›ã€åŠŸèƒ½æœ€å¼ºå¤§çš„æœç´¢åº“ï¼Œç›´æ¥åŸºäºluceneå¼€å‘ï¼Œéå¸¸å¤æ‚ï¼Œ apiå¤æ‚ã€‚ Elasticsearch:åŸºäºlucene,å°è£…äº†è®¸å¤šuceneåº•å±‚åŠŸèƒ½ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„ restful apiæ¥å£å’Œè®¸å¤šè¯­è¨€çš„å®¢æˆ·ç«¯ï¼Œå¦‚javaçš„é«˜çº§å®¢æˆ·ç«¯(Java High Level REST Client)å’Œåº•å±‚å®¢æˆ·ç«¯(Java Low Level REST Client)</p><figure><img src="/assets/img/ElasticStack/Elasticsearchäº¤äº’.png" alt="Elasticsearchäº¤äº’" tabindex="0" loading="lazy"><figcaption>Elasticsearchäº¤äº’</figcaption></figure><p>èµ·æºï¼šShay Banonã€‚2004å¹´å¤±ä¸šï¼Œé™ªè€å©†å»ä¼¦æ•¦å­¦ä¹ å¨å¸ˆã€‚å¤±ä¸šåœ¨å®¶å¸®è€å©† å†™ä¸€ä¸ªèœè°±æœç´¢å¼•æ“ã€‚å°è£…äº†lucenetçš„å¼€æºé¡¹ç›®ï¼Œcompassã€‚æ‰¾åˆ°å·¥ä½œåï¼Œåšåˆ†å¸ƒ å¼é«˜æ€§èƒ½é¡¹ç›®ï¼Œå†å°è£…compass,å†™å‡ºäº†elasticsearch,ä½¿å¾—luceneï¼Œä½¿å¾—lucenetæ”¯æŒåˆ†å¸ƒå¼ã€‚ ç°åœ¨æ˜¯Elasticsearchåˆ›å§‹äººå…¼Elasticé¦–å¸­æ‰§è¡Œå®˜ã€‚</p><h4 id="elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ-1" tabindex="-1"><a class="header-anchor" href="#elasticsearch-çš„æ ¸å¿ƒæ¦‚å¿µ-1" aria-hidden="true">#</a> Elasticsearch çš„æ ¸å¿ƒæ¦‚å¿µ</h4><h5 id="_1-nrt-near-realtime-è¿‘å®æ—¶" tabindex="-1"><a class="header-anchor" href="#_1-nrt-near-realtime-è¿‘å®æ—¶" aria-hidden="true">#</a> 1 NRT(Near Realtime):è¿‘å®æ—¶</h5><ol><li>ä¸¤æ–¹é¢ï¼š å†™å…¥æ•°æ®æ—¶ï¼Œè¿‡1ç§’æ‰ä¼šè¢«æœç´¢åˆ°ï¼Œå› ä¸ºå†…éƒ¨åœ¨åˆ†è¯ã€å½•å…¥ç´¢å¼•ã€‚</li><li>esæœç´¢æ—¶ï¼šæœç´¢å’Œåˆ†ææ•°æ®éœ€è¦ç§’çº§å‡ºç»“æœã€‚</li></ol><h5 id="_2-cluster-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_2-cluster-é›†ç¾¤" aria-hidden="true">#</a> 2 Cluster:é›†ç¾¤</h5><p>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¯åŠ¨ç€eså®ä¾‹çš„æœºå™¨ç¾¤ã€‚é€šå¸¸ä¸€å°æœºå™¨èµ·ä¸€ä¸ªeså®ä¾‹ã€‚åŒä¸€ç½‘ ç»œä¸‹ï¼Œé›†åä¸€æ ·çš„å¤šä¸ªså®ä¾‹è‡ªåŠ¨ç»„æˆé›†ç¾¤ï¼Œè‡ªåŠ¨å‡è¡¡åˆ†ç‰‡ç­‰è¡Œä¸ºã€‚é»˜è®¤é›†ç¾¤å ä¸º&quot;elasticsearch&quot;ã€‚</p><h5 id="_3-node-èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-node-èŠ‚ç‚¹" aria-hidden="true">#</a> 3 Node:èŠ‚ç‚¹</h5><p>æ¯ä¸ªså®ä¾‹ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹ã€‚èŠ‚ç‚¹åè‡ªåŠ¨åˆ†é…ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®ã€‚</p><h5 id="_4-document-æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_4-document-æ–‡æ¡£" aria-hidden="true">#</a> 4 Document:æ–‡æ¡£</h5><p>esä¸­çš„æœ€å°æ•°æ®å•å…ƒã€‚ä¸€ä¸ªdocumentiå°±åƒæ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•ã€‚é€šå¸¸ä»¥)json æ ¼å¼æ˜¾ç¤ºã€‚å¤šä¸ªdocumentå­˜å‚¨äºä¸€ä¸ªç´¢å¼•(Index)ä¸­ã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>book document

<span class="token punctuation">{</span>
    <span class="token property">&quot;book_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;book_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;javaç¼–ç¨‹æ€æƒ³&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;book_desc&quot;</span><span class="token operator">:</span>&quot;ä»Javaçš„åŸºç¡€è¯­æ³•åˆ°æœ€é«˜çº§ç‰¹æ€§ï¼ˆæ·±å…¥çš„<span class="token punctuation">[</span>é¢å‘å¯¹è±¡<span class="token punctuation">]</span>(https<span class="token operator">:</span><span class="token comment">//baike.baidu.com/item/é¢å‘å¯¹è±¡)æ¦‚å¿µã€å¤šçº¿ç¨‹ã€è‡ªåŠ¨é¡¹ç›®æ„	å»ºã€å•å…ƒæµ‹è¯•å’Œè°ƒè¯•ç­‰)ï¼Œæœ¬ä¹¦éƒ½èƒ½é€æ­¥æŒ‡å¯¼ä½ è½»æ¾å­¦æ¡ã€‚â€,</span>
	<span class="token property">&quot;category_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;category_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;java&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5-index-ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_5-index-ç´¢å¼•" aria-hidden="true">#</a> 5 Index:ç´¢å¼•</h5><p>åŒ…å«ä¸€å †æœ‰ç›¸ä¼¼ç»“æ„çš„æ–‡æ¡£æ•°æ®ã€‚ ç´¢å¼•åˆ›å»ºè§„åˆ™ï¼š</p><ul><li>ä»…é™å°å†™å­—æ¯</li><li>ä¸èƒ½åŒ…å«1ã€/ã€*ã€ï¼Ÿã€&quot;ã€&lt;ã€&gt;ã€ã€#ä»¥åŠç©ºæ ¼ç¬¦ç­‰ç‰¹æ®Šç¬¦å·</li><li>ä»7.0ç‰ˆæœ¬å¼€å§‹ä¸å†åŒ…å«å†’å·</li><li>ä¸èƒ½ä»¥ã€æˆ–+å¼€å¤´</li><li>ä¸èƒ½è¶…è¿‡255ä¸ªå­—èŠ‚ï¼ˆæ³¨æ„å®ƒæ˜¯å­—èŠ‚ï¼Œå› æ­¤å¤šå­—èŠ‚å­—ç¬¦å°†è®¡å…¥255ä¸ªé™åˆ¶ï¼‰</li></ul><h5 id="_6-field-å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#_6-field-å­—æ®µ" aria-hidden="true">#</a> 6 Field:å­—æ®µ</h5><p>å°±åƒæ•°æ®åº“ä¸­çš„åˆ—(Columns),å®šä¹‰æ¯ä¸ªdocument)åº”è¯¥æœ‰çš„å­—æ®µã€‚</p><h5 id="_7type-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_7type-ç±»å‹" aria-hidden="true">#</a> 7Type:ç±»å‹</h5><p>æ¯ä¸ªç´¢å¼•é‡Œéƒ½å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªtype,typeæ˜¯indexä¸­çš„ä¸€ä¸ªé€»è¾‘æ•°æ®åˆ†ç±»ï¼Œ ä¸€ä¸ªtypeä¸‹çš„document,éƒ½æœ‰ç›¸åŒçš„fieldã€‚ <strong>æ³¨æ„</strong>ï¼š6.0ä¹‹å‰çš„ç‰ˆæœ¬æœ‰typeï¼ˆç±»å‹)æ¦‚å¿µï¼Œtypeç›¸å½“äºå…³ç³»æ•°æ®åº“çš„è¡¨ï¼ŒES å®˜æ–¹å°†åœ¨ES9.0ç‰ˆæœ¬ä¸­å½»åº•åˆ é™¤typeã€‚æœ¬æ•™ç¨‹ypyéƒ½ä¸º_docã€‚</p><h5 id="_8-shard-åˆ†ç‰‡" tabindex="-1"><a class="header-anchor" href="#_8-shard-åˆ†ç‰‡" aria-hidden="true">#</a> 8 shard:åˆ†ç‰‡</h5><p>indexæ•°æ®è¿‡å¤§æ—¶ï¼Œå°†index.é‡Œé¢çš„æ•°æ®ï¼Œåˆ†ä¸ºå¤šä¸ªshard,åˆ†å¸ƒå¼çš„å­˜å‚¨åœ¨å„ ä¸ªæœåŠ¡å™¨ä¸Šé¢ã€‚å¯ä»¥æ”¯æŒæµ·é‡æ•°æ®å’Œé«˜å¹¶å‘ï¼Œæå‡æ€§èƒ½å’Œååé‡ï¼Œå……åˆ†åˆ©ç”¨å¤šå°æœº å™¨çš„cpuã€‚</p><h5 id="_9-replica-å‰¯æœ¬" tabindex="-1"><a class="header-anchor" href="#_9-replica-å‰¯æœ¬" aria-hidden="true">#</a> 9 replica:å‰¯æœ¬</h5><p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä»»ä½•ä¸€å°æœºå™¨éƒ½ä¼šéšæ—¶å®•æœºï¼Œå¦‚æœå®•æœºï¼Œindexçš„ä¸€ä¸ªåˆ†ç‰‡ æ²¡æœ‰ï¼Œå¯¼è‡´æ­¤indexä¸èƒ½æœç´¢ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œæˆ‘ä»¬ä¼šå°†æ¯ä¸ªindexçš„ åˆ†ç‰‡ç»è¡Œå¤‡ä»½ï¼Œå­˜å‚¨åœ¨å¦å¤–çš„æœºå™¨ä¸Šã€‚ä¿è¯å°‘æ•°æœºå™¨å®•æœºsé›†ç¾¤ä»å¯ä»¥æœç´¢ã€‚</p><p>èƒ½æ­£å¸¸æä¾›æŸ¥è¯¢å’Œæ’å…¥çš„åˆ†ç‰‡æˆ‘ä»¬å«åšä¸»åˆ†ç‰‡(primary shard),å…¶ä½™çš„æˆ‘ ä»¬å°±ç®¡ä»–ä»¬å«åšå¤‡ä»½çš„åˆ†ç‰‡(replica shard)ã€‚</p><p>s6é»˜è®¤æ–°å»ºç´¢å¼•æ—¶ï¼Œ5åˆ†ç‰‡ï¼Œ1å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸»ä¸€å¤‡ï¼Œå…±10ä¸ªåˆ†ç‰‡ã€‚æ‰€ä»¥ï¼Œ esé›†ç¾¤æœ€å°è§„æ¨¡ä¸ºä¸¤å°ã€‚es71åˆ†ç‰‡ï¼Œ1å‰¯æœ¬ï¼Œä¸€å…±2åˆ†ç‰‡ã€‚</p><figure><img src="/assets/img/ElasticStack/esæ ¸å¿ƒæ¦‚å¿µ.png" alt="esæ ¸å¿ƒæ¦‚å¿µ" tabindex="0" loading="lazy"><figcaption>esæ ¸å¿ƒæ¦‚å¿µ</figcaption></figure><h4 id="æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µvs-elasticsearchæ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µvs-elasticsearchæ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true">#</a> æ•°æ®åº“æ ¸å¿ƒæ¦‚å¿µvs.elasticsearchæ ¸å¿ƒæ¦‚å¿µ</h4><table><thead><tr><th style="text-align:left;">å…³ç³»å‹æ•°æ®åº“ï¼ˆæ¯”å¦‚Mysql)<br></th><th style="text-align:left;">éå…³ç³»å‹æ•°æ®åº“(Elasticsearch)<br></th></tr></thead><tbody><tr><td style="text-align:left;">æ•°æ®åº“Database<br></td><td style="text-align:left;">ç´¢å¼•Index<br></td></tr><tr><td style="text-align:left;">è¡¨Table<br></td><td style="text-align:left;">ç´¢å¼•Index(åŸä¸ºType)<br></td></tr><tr><td style="text-align:left;">æ•°æ®è¡ŒRod<br></td><td style="text-align:left;">æ–‡æ¡£Document<br></td></tr><tr><td style="text-align:left;">æ•°æ®åˆ—Column<br></td><td style="text-align:left;">å­—æ®µField<br></td></tr><tr><td style="text-align:left;">çº¦æŸSchema<br></td><td style="text-align:left;">æ˜ å°„Mapping</td></tr></tbody></table><h2 id="eså¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#eså¿«é€Ÿå…¥é—¨" aria-hidden="true">#</a> eså¿«é€Ÿå…¥é—¨</h2><h3 id="å•†å“çš„crud" tabindex="-1"><a class="header-anchor" href="#å•†å“çš„crud" aria-hidden="true">#</a> å•†å“çš„CRUD</h3><h4 id="_1-åˆ›å»ºå›¾ä¹¦ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»ºå›¾ä¹¦ç´¢å¼•" aria-hidden="true">#</a> 1. åˆ›å»ºå›¾ä¹¦ç´¢å¼•</h4><blockquote><p>è¯­æ³•ï¼šPUT /index</p></blockquote><p>è¯·æ±‚å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>put /book
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shards_acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ–°å¢å›¾ä¹¦-æ–°å¢æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_2-æ–°å¢å›¾ä¹¦-æ–°å¢æ–‡æ¡£" aria-hidden="true">#</a> 2. æ–°å¢å›¾ä¹¦ï¼šæ–°å¢æ–‡æ¡£</h4><blockquote><p>è¯­æ³•ï¼šPUT /index/type/id</p></blockquote><p>è¯·æ±‚å‚æ•°</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>put /book/_doc/<span class="token number">1</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapæ˜¯ç”±witter:æ¨å‡ºçš„ä¸€ä¸ªå‰å°é¡µé¢å¼€å‘cssæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œæ­¤æ¡†æ¶é›†æˆäº†å¤šç§é¡µé¢æ•ˆæœã€‚æ­¤å¼€å‘æ¡†æ¶åŒ…å«äº†å¤§é‡çš„CSSã€Sç¨‹åºä»£ç ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ä¸æ“…é•¿cssé¡µé¢å¼€å‘çš„ç¨‹åºäººå‘˜ï¼‰è½»æ¾çš„å®ç°ä¸€ä¸ªCss,ä¸å—æµè§ˆå™¨é™åˆ¶çš„ç²¾ç¾ç•Œé¢cssæ•ˆæœã€‚&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;studymodel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;201002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">38.6</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-08-2519:11:35&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;group1/M00/00/00/wKh1QFs6RCeAYOpHAAJx5ZjNDEM428.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;dev&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœ</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ ¹æ®-idæŸ¥è¯¢å›¾ä¹¦-æŸ¥è¯¢æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_3-æ ¹æ®-idæŸ¥è¯¢å›¾ä¹¦-æŸ¥è¯¢æ–‡æ¡£" aria-hidden="true">#</a> 3. æ ¹æ®_idæŸ¥è¯¢å›¾ä¹¦:æŸ¥è¯¢æ–‡æ¡£</h4><blockquote><p>è¯­æ³•ï¼šGET/index/type/id</p></blockquote><p>è¯·æ±‚å‚æ•°</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>get /book/_doc/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼Œå­˜åœ¨</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Bootstrapæ˜¯ç”±witter:æ¨å‡ºçš„ä¸€ä¸ªå‰å°é¡µé¢å¼€å‘cssæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œæ­¤æ¡†æ¶é›†æˆäº†å¤šç§é¡µé¢æ•ˆæœã€‚æ­¤å¼€å‘æ¡†æ¶åŒ…å«äº†å¤§é‡çš„CSSã€Sç¨‹åºä»£ç ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ä¸æ“…é•¿cssé¡µé¢å¼€å‘çš„ç¨‹åºäººå‘˜ï¼‰è½»æ¾çš„å®ç°ä¸€ä¸ªCss,ä¸å—æµè§ˆå™¨é™åˆ¶çš„ç²¾ç¾ç•Œé¢cssæ•ˆæœã€‚&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;studymodel&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;201002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span> <span class="token operator">:</span> <span class="token number">38.6</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2019-08-2519:11:35&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pic&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;group1/M00/00/00/wKh1QFs6RCeAYOpHAAJx5ZjNDEM428.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dev&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å“åº”ç»“æœä¸å­˜åœ¨</p></blockquote><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-è¦†ç›–æŒ‡å®š-idçš„å›¾ä¹¦-è¦†ç›–æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_4-è¦†ç›–æŒ‡å®š-idçš„å›¾ä¹¦-è¦†ç›–æ–‡æ¡£" aria-hidden="true">#</a> 4. è¦†ç›–æŒ‡å®š_idçš„å›¾ä¹¦ï¼šè¦†ç›–æ–‡æ¡£</h4><blockquote><p>è¯­æ³•ï¼šPUT /index/type/id</p></blockquote><p>è¯·æ±‚å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>put /book/_doc/<span class="token number">1</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapæ˜¯ç”±witter:æ¨å‡ºçš„ä¸€ä¸ªå‰å°é¡µé¢å¼€å‘cssæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œæ­¤æ¡†æ¶é›†æˆäº†å¤šç§é¡µé¢æ•ˆæœã€‚æ­¤å¼€å‘æ¡†æ¶åŒ…å«äº†å¤§é‡çš„CSSã€Sç¨‹åºä»£ç ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ä¸æ“…é•¿cssé¡µé¢å¼€å‘çš„ç¨‹åºäººå‘˜ï¼‰è½»æ¾çš„å®ç°ä¸€ä¸ªCss,ä¸å—æµè§ˆå™¨é™åˆ¶çš„ç²¾ç¾ç•Œé¢cssæ•ˆæœã€‚&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;studymodel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;201002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">38.6</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-08-2519:11:35&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;group1/M00/00/00/wKh1QFs6RCeAYOpHAAJx5ZjNDEM428.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;js&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-ä¿®æ”¹æŒ‡å®š-idçš„å›¾ä¹¦å±€éƒ¨å†…å®¹-ä¿®æ”¹æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_5-ä¿®æ”¹æŒ‡å®š-idçš„å›¾ä¹¦å±€éƒ¨å†…å®¹-ä¿®æ”¹æ–‡æ¡£" aria-hidden="true">#</a> 5. ä¿®æ”¹æŒ‡å®š_idçš„å›¾ä¹¦å±€éƒ¨å†…å®¹ï¼šä¿®æ”¹æ–‡æ¡£</h4><blockquote><p>è¯­æ³•ï¼šPOST /index/type/id/_update</p></blockquote><p>è¯·æ±‚å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>post /book/_doc/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘_update&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;update&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>#! Deprecation<span class="token operator">:</span> <span class="token punctuation">[</span>types removal<span class="token punctuation">]</span> Specifying types in document update requests is deprecated<span class="token punctuation">,</span> use the endpoint /<span class="token punctuation">{</span>index<span class="token punctuation">}</span>/_update/<span class="token punctuation">{</span>id<span class="token punctuation">}</span> instead.
<span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒæç¤ºå¯ä»¥æ”¹ä¸ºï¼š</p><blockquote><p>è¯­æ³•ï¼šPOST /index/_update/id</p></blockquote><p>è¯·æ±‚å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>post /book/_update/<span class="token number">1</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘_update2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;dev&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-åˆ é™¤å›¾ä¹¦-åˆ é™¤æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_6-åˆ é™¤å›¾ä¹¦-åˆ é™¤æ–‡æ¡£" aria-hidden="true">#</a> 6. åˆ é™¤å›¾ä¹¦ï¼šåˆ é™¤æ–‡æ¡£</h4><blockquote><p>è¯­æ³•ï¼šDELETE /index/type/id</p></blockquote><p>è¯·æ±‚å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>DELETE /book/_doc/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;deleted&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡æ¡£documentå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#æ–‡æ¡£documentå…¥é—¨" aria-hidden="true">#</a> æ–‡æ¡£Documentå…¥é—¨</h3><h4 id="é»˜è®¤çš„è‡ªå¸¦å­—æ®µè§£æ" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤çš„è‡ªå¸¦å­—æ®µè§£æ" aria-hidden="true">#</a> é»˜è®¤çš„è‡ªå¸¦å­—æ®µè§£æ</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Bootstrapæ˜¯ç”±witter:æ¨å‡ºçš„ä¸€ä¸ªå‰å°é¡µé¢å¼€å‘cssæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œæ­¤æ¡†æ¶é›†æˆäº†å¤šç§é¡µé¢æ•ˆæœã€‚æ­¤å¼€å‘æ¡†æ¶åŒ…å«äº†å¤§é‡çš„CSSã€Sç¨‹åºä»£ç ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ä¸æ“…é•¿cssé¡µé¢å¼€å‘çš„ç¨‹åºäººå‘˜ï¼‰è½»æ¾çš„å®ç°ä¸€ä¸ªCss,ä¸å—æµè§ˆå™¨é™åˆ¶çš„ç²¾ç¾ç•Œé¢cssæ•ˆæœã€‚&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;studymodel&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;201002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span> <span class="token operator">:</span> <span class="token number">38.6</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2019-08-2519:11:35&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pic&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;group1/M00/00/00/wKh1QFs6RCeAYOpHAAJx5ZjNDEM428.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dev&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="index" tabindex="-1"><a class="header-anchor" href="#index" aria-hidden="true">#</a> _index</h4><ul><li>å«ä¹‰ï¼šæ­¤æ–‡æ¡£å±äºå“ªä¸ªç´¢å¼•ã€‚</li><li>åŸåˆ™ï¼šç±»ä¼¼æ•°æ®æ”¾åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ã€‚æ•°æ®åº“ä¸­è¡¨çš„å®šä¹‰è§„åˆ™ã€‚å¦‚å›¾ä¹¦ä¿¡æ¯æ”¾åœ¨00kç´¢ã€‚</li><li>å¼•ä¸­ï¼Œå‘˜å·¥ä¿¡æ¯æ”¾åœ¨employeeç´¢å¼•ä¸­ã€‚å„ä¸ªç´¢å­˜å‚¨å’Œæœç´¢æ—¶äº’ä¸å½±å“ã€‚ å®šä¹‰è§„åˆ™ï¼šè‹±æ–‡å°å†™ã€‚å°½å‘ˆä¸è¦ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ã€‚order user</li></ul><h4 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> _type</h4><ul><li>å«ä¹‰ï¼šç±»åˆ«ã€‚book java nodeã€‚</li><li>æ³¨æ„ï¼šä»¥åçš„es9å°†å½»åº•å†Œé™¤æ­¤å­—æ®µï¼Œæ‰€ä»¥å½“å‰ç‰ˆæœ¬åœ¨ä¸æ–­å¼±åŒ–typeã€‚ä¸éœ€è¦å…³ æ³¨ã€‚è§åˆ°typeéƒ½ä¸ºdocã€‚</li></ul><h4 id="id" tabindex="-1"><a class="header-anchor" href="#id" aria-hidden="true">#</a> _id</h4><ul><li>å«ä¹‰ï¼šæ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ã€‚å°±åƒè¡¨çš„idä¸»é”®ã€‚ç»“åˆç´¢å¼•å¯ä»¥æ ‡è¯†å’Œå®šä¹‰ä¸€ä¸ªæ–‡æ¡£ã€‚</li><li>ç”Ÿæˆï¼šæ‰‹åŠ¨(put /index/_doc/id)ã€è‡ªåŠ¨ã€‚</li></ul><h4 id="åˆ›å»ºç´¢å¼•æ—¶-ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç´¢å¼•æ—¶-ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­" aria-hidden="true">#</a> åˆ›å»ºç´¢å¼•æ—¶ï¼Œä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­</h4><figure><img src="/assets/img/ElasticStack/ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­.png" alt="ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­" tabindex="0" loading="lazy"><figcaption>ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒç´¢å¼•ä¸­</figcaption></figure><h4 id="ç”Ÿæˆæ–‡æ¡£id" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆæ–‡æ¡£id" aria-hidden="true">#</a> ç”Ÿæˆæ–‡æ¡£id</h4><h5 id="æ‰‹åŠ¨ç”Ÿæˆid" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨ç”Ÿæˆid" aria-hidden="true">#</a> æ‰‹åŠ¨ç”Ÿæˆid</h5><p>å‚è€ƒ[2. æ–°å¢å›¾ä¹¦ï¼šæ–°å¢æ–‡æ¡£](#2. æ–°å¢å›¾ä¹¦ï¼šæ–°å¢æ–‡æ¡£)</p><h5 id="è‡ªåŠ¨ç”Ÿæˆid" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨ç”Ÿæˆid" aria-hidden="true">#</a> è‡ªåŠ¨ç”Ÿæˆid</h5><p>ç™½åŠ¨idç‰¹ç‚¹: é•¿åº¦ä¸º20ä¸ªå­—ç¬¦ï¼ŒURLå®‰å…¨ï¼Œbase64ç¼–ç ï¼ŒGUID,åˆ†å¸ƒå¼ç”Ÿæˆä¸å†²çªã€‚</p><blockquote><p>è¯­æ³•ï¼šPOST /index/type</p></blockquote><p>è¯·æ±‚å…¥å‚ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /test_index/_doc
<span class="token punctuation">{</span>
  <span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Fn28zYQBMWSYG3VSxZy0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sourceå­—æ®µ" tabindex="-1"><a class="header-anchor" href="#sourceå­—æ®µ" aria-hidden="true">#</a> _sourceå­—æ®µ</h4><h5 id="source" tabindex="-1"><a class="header-anchor" href="#source" aria-hidden="true">#</a> _source</h5><p>å«ä¹‰ï¼šæ’å…¥æ•°æ®æ—¶çš„æ‰€æœ‰å­—æ®µå’Œå€¼ã€‚åœ¨geè·å–æ•°æ®æ—¶ï¼Œåœ¨_source:å­—æ®µä¸­åŸæ ·è¿”å›ã€‚ GET /book/doc/1</p><h5 id="_6-3-2å®šåˆ¶è¿”å›å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#_6-3-2å®šåˆ¶è¿”å›å­—æ®µ" aria-hidden="true">#</a> 6.3.2å®šåˆ¶è¿”å›å­—æ®µ</h5><p>å°±åƒsqlä¸è¦select*,è€Œè¦select name,.price from book,ä¸€æ ·ã€‚</p><blockquote><p>è¿”å›æ‰€æœ‰ï¼šGET /book/_doc/1</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;_index&quot; : &quot;book&quot;,
  &quot;_type&quot; : &quot;_doc&quot;,
  &quot;_id&quot; : &quot;1&quot;,
  &quot;_version&quot; : 1,
  &quot;_seq_no&quot; : 0,
  &quot;_primary_term&quot; : 1,
  &quot;found&quot; : true,
  &quot;_source&quot; : {
    &quot;name&quot; : &quot;Bootstrapå¼€å‘&quot;,
    &quot;description&quot; : &quot;Bootstrapæ˜¯ç”±witter:æ¨å‡ºçš„ä¸€ä¸ªå‰å°é¡µé¢å¼€å‘cssæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œæ­¤æ¡†æ¶é›†æˆäº†å¤šç§é¡µé¢æ•ˆæœã€‚æ­¤å¼€å‘æ¡†æ¶åŒ…å«äº†å¤§é‡çš„CSSã€Sç¨‹åºä»£ç ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯ä¸æ“…é•¿cssé¡µé¢å¼€å‘çš„ç¨‹åºäººå‘˜ï¼‰è½»æ¾çš„å®ç°ä¸€ä¸ªCss,ä¸å—æµè§ˆå™¨é™åˆ¶çš„ç²¾ç¾ç•Œé¢cssæ•ˆæœã€‚&quot;,
    &quot;studymodel&quot; : &quot;201002&quot;,
    &quot;price&quot; : 38.6,
    &quot;timestamp&quot; : &quot;2019-08-2519:11:35&quot;,
    &quot;pic&quot; : &quot;group1/M00/00/00/wKh1QFs6RCeAYOpHAAJx5ZjNDEM428.jpg&quot;,
    &quot;tags&quot; : [
      &quot;bootstrap&quot;,
      &quot;dev&quot;
    ]
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å®šåˆ¶è¿”å›å­—æ®µ: GET /book/_doc/1?_source_includes=name,price</p></blockquote><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_5eq_-no&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;found&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">38.6</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bootstrapå¼€å‘ç‰§ç¨‹1&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ–‡æ¡£çš„æ›¿æ¢ä¸åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#æ–‡æ¡£çš„æ›¿æ¢ä¸åˆ é™¤" aria-hidden="true">#</a> æ–‡æ¡£çš„æ›¿æ¢ä¸åˆ é™¤</h4><h5 id="å…¨é‡æ›¿æ¢" tabindex="-1"><a class="header-anchor" href="#å…¨é‡æ›¿æ¢" aria-hidden="true">#</a> å…¨é‡æ›¿æ¢</h5><p>æ‰§è¡Œä¸¤æ¬¡ï¼Œè¿”å›ç»“æœä¸­ç‰ˆæœ¬å·(version)åœ¨ä¸æ–­ä¸Šå‡ã€‚æ­¤è¿‡ç¨‹ä¸ºå…¨é‡æ›¿æ¢ã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">1</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®è´¨ï¼šæ—§æ–‡æ¡£çš„å†…å®¹ä¸ä¼šç«‹å³åˆ é™¤ï¼Œåªæ˜¯æ ‡è®°ä¸ºdeletedã€‚é€‚å½“çš„æ—¶æœºï¼Œé›†ç¾¤ä¼šå°†è¿™äº›æ–‡æ¡£åˆ é™¤ã€‚</p><figure><img src="/assets/img/ElasticStack/å…¨é‡æ›¿æ¢å›¾.png" alt="å…¨é‡æ›¿æ¢å›¾" tabindex="0" loading="lazy"><figcaption>å…¨é‡æ›¿æ¢å›¾</figcaption></figure><h5 id="å¼ºåˆ¶åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#å¼ºåˆ¶åˆ›å»º" aria-hidden="true">#</a> å¼ºåˆ¶åˆ›å»º</h5><p>ä¸ºé˜²æ­¢è¦†ç›–åŸæœ‰æ•°æ®ï¼Œæˆ‘ä»¬åœ¨æ–°å¢æ—¶ï¼Œè®¾ç½®ä¸ºå¼ºåˆ¶åˆ›å»ºï¼Œä¸ä¼šè¦†ç›–åŸæœ‰æ–‡æ¡£ã€‚</p><p>å¯ä»¥ç”¨äºæ•°æ®åº“åŒæ­¥æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ•°æ®åªæ’å…¥ä¸€æ¬¡ä¸ä¼šé‡å¤æ’å…¥æˆ–è¦†ç›–ã€‚</p><div class="language-kibana line-numbers-mode" data-ext="kibana"><pre class="language-kibana"><code>è¯­æ³•ï¼šPUT /index/_doc/id/_create
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¯·æ±‚å…¥å‚ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">1</span>/_create
<span class="token punctuation">{</span>
    <span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€æ¬¡è¯·æ±‚å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡è¯·æ±‚(å­˜åœ¨æ•°æ®)å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;root_cause&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;version_conflict_engine_exception&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reason&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[1]: version conflict, document already exists (current version [1])&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index_uuid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ej29cxPQQ3ab2t8_U0hMkg&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;shard&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;version_conflict_engine_exception&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reason&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[1]: version conflict, document already exists (current version [1])&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index_uuid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ej29cxPQQ3ab2t8_U0hMkg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shard&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token number">409</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å±€éƒ¨æ›´æ–°partial-update" tabindex="-1"><a class="header-anchor" href="#å±€éƒ¨æ›´æ–°partial-update" aria-hidden="true">#</a> å±€éƒ¨æ›´æ–°partial update</h4><p>ä½¿ç”¨PUT/index/ype/idä¸ºæ–‡æ¡£å…¨é‡æ›¿æ¢ï¼Œéœ€è¦å°†æ–‡æ¡£æ‰€æœ‰æ•°æ®æäº¤ã€‚ partial update å±€éƒ¨æ›¿æ¢åˆ™åªä¿®æ”¹å˜åŠ¨å­—æ®µã€‚ ç”¨æ³•ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>post /index/type/id/_update
<span class="token punctuation">{</span>
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å›¾è§£å†…éƒ¨åŸç†" tabindex="-1"><a class="header-anchor" href="#å›¾è§£å†…éƒ¨åŸç†" aria-hidden="true">#</a> å›¾è§£å†…éƒ¨åŸç†</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£å±€éƒ¨æ›´æ–°å†…éƒ¨åŸç†.png" alt="å›¾è§£å±€éƒ¨æ›´æ–°å†…éƒ¨åŸç†" tabindex="0" loading="lazy"><figcaption>å›¾è§£å±€éƒ¨æ›´æ–°å†…éƒ¨åŸç†</figcaption></figure><p>å†…éƒ¨ä¸å…¨é‡æ›¿æ¢æ˜¯ä¸€æ ·çš„ï¼Œæ—§æ–‡æ¡£æ ‡è®°ä¸ºåˆ é™¤ï¼Œæ–°å»ºä¸€ä¸ªæ–‡æ¡£ã€‚ ä¼˜ç‚¹ï¼š</p><ul><li>å¤§å¤§å‡å°‘ç½‘ç»œä¼ è¾“æ¬¡æ•°å’Œæµé‡ï¼Œæå‡æ€§èƒ½ã€‚</li><li>å‡å°‘å¹¶å‘å†²çªå‘ç”Ÿçš„æ¦‚ç‡ã€‚</li></ul><h5 id="æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#æ¼”ç¤º" aria-hidden="true">#</a> æ¼”ç¤º</h5><p>[2. æ–°å¢å›¾ä¹¦ï¼šæ–°å¢æ–‡æ¡£](#2. æ–°å¢å›¾ä¹¦ï¼šæ–°å¢æ–‡æ¡£)</p><p>[5. ä¿®æ”¹æŒ‡å®š_idçš„å›¾ä¹¦å±€éƒ¨å†…å®¹ï¼šä¿®æ”¹æ–‡æ¡£](#5. ä¿®æ”¹æŒ‡å®š_idçš„å›¾ä¹¦å±€éƒ¨å†…å®¹ï¼šä¿®æ”¹æ–‡æ¡£)</p><h4 id="ä½¿ç”¨è„šæœ¬æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨è„šæœ¬æ›´æ–°" aria-hidden="true">#</a> ä½¿ç”¨è„šæœ¬æ›´æ–°</h4><p>eså¯ä»¥å†…ç½®è„šæœ¬æ‰§è¡Œå¤æ‚æ“ä½œã€‚ä¾‹å¦‚<code>painless</code>è„šæœ¬ã€‚ æ³¨æ„ï¼š<code>groovy</code>è„šæœ¬åœ¨s6ä»¥åå°±ä¸æ”¯æŒäº†ã€‚åŸå› æ˜¯è€—å†…å­˜ï¼Œä¸å®‰å…¨è¿œç¨‹æ³¨å…¥æ¼æ´ã€‚</p><h5 id="å†…ç½®è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#å†…ç½®è„šæœ¬" aria-hidden="true">#</a> å†…ç½®è„šæœ¬</h5><p>éœ€æ±‚1ï¼šä¿®æ”¹æ–‡æ¡£6çš„numå­—æ®µï¼Œ+1ã€‚</p><p>æ’å…¥æ•°æ®:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">6</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œè„šæœ¬æ“ä½œï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /test_index/_doc/<span class="token number">6</span>/_update
<span class="token punctuation">{</span>
    <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ctx._source.num+=1&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>#! Deprecation<span class="token operator">:</span> <span class="token punctuation">[</span>types removal<span class="token punctuation">]</span> Specifying types in document update requests is deprecated<span class="token punctuation">,</span> use the endpoint /<span class="token punctuation">{</span>index<span class="token punctuation">}</span>/_update/<span class="token punctuation">{</span>id<span class="token punctuation">}</span> instead.
<span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥è¯¢æ•°æ®ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>GET /test_index/_doc_6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€æ±‚2ï¼šæœç´¢æ‰€æœ‰æ–‡æ¡£ï¼Œå°†numå­—æ®µä¹˜ä»¥2è¾“å‡ºã€‚</p><p>æ’å…¥æ•°æ®ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">7</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥è¯¢ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>GET /test_index/_search
<span class="token punctuation">{</span>
    <span class="token property">&quot;script_fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_doubled_field&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;lang&quot;</span><span class="token operator">:</span> <span class="token string">&quot;expression&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;doc[&#39;num&#39;] * multiplier&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;multiplier&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timed_out&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipped&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;relation&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;eq&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;max_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Fn28zYQBMWSYG3VSxZy0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;my_doubled_field&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">0.0</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;my_doubled_field&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">0.0</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;my_doubled_field&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">4.0</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;my_doubled_field&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">10.0</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¤–éƒ¨è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#å¤–éƒ¨è„šæœ¬" aria-hidden="true">#</a> å¤–éƒ¨è„šæœ¬</h5><p><code>Bainless</code>æ˜¯å†…ç½®æ”¯æŒçš„ã€‚è„šæœ¬å†…å®¹å¯ä»¥é€šè¿‡å¤šç§é€”å¾„ä¼ ç»™es,åŒ…æ‹¬restæ¥å£ï¼Œæˆ–è€…æ”¾</p><p>åˆ°config/scriptsç›®å½•ç­‰ï¼Œé»˜è®¤å¼€å¯ã€‚</p><p>æ³¨æ„ï¼šè„šæœ¬æ€§èƒ½ä½ä¸‹ï¼Œä¸”å®¹æ˜“å‘ç”Ÿæ³¨å…¥ï¼Œæœ¬æ•™ç¨‹å¿½ç•¥ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="å›¾è§£esçš„å¹¶å‘é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å›¾è§£esçš„å¹¶å‘é—®é¢˜" aria-hidden="true">#</a> å›¾è§£ESçš„å¹¶å‘é—®é¢˜</h4><figure><img src="/assets/img/ElasticStack/ESå¹¶å‘é—®é¢˜.png" alt="ESå¹¶å‘é—®é¢˜" tabindex="0" loading="lazy"><figcaption>ESå¹¶å‘é—®é¢˜</figcaption></figure><p>å¦‚åŒç§’æ€åœºæ™¯ï¼Œå¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼ŒESåŒæ ·ä¼šå‡ºç°å¹¶å‘å†²çªé—®é¢˜ã€‚</p><h4 id="å›¾è§£æ‚²è§‚é”ä¸ä¹è§‚é”æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£æ‚²è§‚é”ä¸ä¹è§‚é”æœºåˆ¶" aria-hidden="true">#</a> å›¾è§£æ‚²è§‚é”ä¸ä¹è§‚é”æœºåˆ¶</h4><p>ä¸ºæ§åˆ¶å¹¶å‘é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨é”æœºåˆ¶ã€‚åˆ†ä¸ºæ‚²è§‚é”å’Œä¹è§‚é”ä¸¤ç§æœºåˆ¶ã€‚</p><p>æ‚²è§‚é”ï¼šå¾ˆæ‚²è§‚ï¼Œæ‰€æœ‰æƒ…å†µéƒ½ä¸Šé”ã€‚æ­¤æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œæ•°æ®ã€‚å…·ä½“ä¾‹å­ä¸º</p><p>æ•°æ®åº“ä¸­çš„è¡Œçº§é”ã€è¡¨çº§é”ã€è¯»é”ã€å†™é”ç­‰ã€‚</p><p>ç‰¹ç‚¹ï¼šä¼˜ç‚¹æ˜¯æ–¹ä¾¿ï¼Œç›´æ¥åŠ é”ï¼Œå¯¹ç¨‹åºé€æ˜ã€‚ç¼ºç‚¹æ˜¯æ•ˆç‡ä½ã€‚</p><p>ä¹è§‚é”ï¼šå¾ˆä¹è§‚ï¼Œå¯¹æ•°æ®æœ¬èº«ä¸åŠ é”ã€‚æäº¤æ•°æ®æ—¶ï¼Œé€šè¿‡ä¸€ç§æœºåˆ¶éªŒè¯æ˜¯å¦å­˜åœ¨å†²</p><p>çªï¼Œå¦‚esä¸­é€šè¿‡ç‰ˆæœ¬å·éªŒè¯ã€‚</p><p>ç‰¹ç‚¹ï¼šä¼˜ç‚¹æ˜¯å¹¶å‘èƒ½åŠ›é«˜ã€‚ç¼ºç‚¹æ˜¯æ“ä½œç¹çï¼Œåœ¨æäº¤æ•°æ®æ—¶ï¼Œå¯èƒ½åå¤é‡è¯•å¤šæ¬¡ã€‚</p><h4 id="å›¾è§£eså†…éƒ¨åŸºäº-versionä¹è§‚é”æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£eså†…éƒ¨åŸºäº-versionä¹è§‚é”æ§åˆ¶" aria-hidden="true">#</a> å›¾è§£eså†…éƒ¨åŸºäº_versionä¹è§‚é”æ§åˆ¶</h4><h5 id="å®éªŒåŸºäº-versionçš„ç‰ˆæœ¬æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#å®éªŒåŸºäº-versionçš„ç‰ˆæœ¬æ§åˆ¶" aria-hidden="true">#</a> å®éªŒåŸºäº_versionçš„ç‰ˆæœ¬æ§åˆ¶</h5><p>eså¯¹äºæ–‡æ¡£çš„å¢åˆ·æ”¹éƒ½æ˜¯åŸºäºç‰ˆæœ¬å·ã€‚</p><p>æ–°å¢å¤šæ¬¡æ–‡æ¡£ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">3</span>
<span class="token punctuation">{</span>
	<span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›ç‰ˆæœ¬å·é€’å¢ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// æ–°å¢ç¬¬ä¸€æ¬¡</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ–°å¢ç¬¬äºŒæ¬¡</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ é™¤æ­¤æ–‡æ¡£ï¼š</p><div class="language-jsom line-numbers-mode" data-ext="jsom"><pre class="language-jsom"><code>DELETE /test_index/_doc/3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;deleted&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³ä½¿æ˜¯åˆ é™¤ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·ä¾ç„¶é€’å¢ï¼ŒéªŒè¯å»¶è¿Ÿåˆ é™¤ç­–ç•¥ã€‚ å¦‚æœé™¤ä¸€æ¡æ•°æ®ç«‹é©¬åˆ é™¤çš„è¯ï¼Œæ‰€æœ‰åˆ†ç‰‡å’Œå‰¯æœ¬éƒ½è¦ç«‹é©¬åˆ·é™¤ï¼Œå¯¹sé›†ç¾¤å‹åŠ›å¤ª å¤§ã€‚</p><h5 id="å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶" aria-hidden="true">#</a> å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶</h5><p>eså†…éƒ¨ä¸»ä»åŒæ­¥æ—¶ï¼Œæ˜¯å¤šçº¿ç¨‹å¼‚æ­¥ã€‚ä¹è§‚é”æœºåˆ¶ã€‚</p><figure><img src="/assets/img/ElasticStack/å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶.png" alt="å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶" tabindex="0" loading="lazy"><figcaption>å›¾è§£eså†…éƒ¨ä¸»ä»åŒæ­¥å¹¶å‘æ§åˆ¶</figcaption></figure><h4 id="æ‰¹é‡å¢åˆ æ”¹-bulk" tabindex="-1"><a class="header-anchor" href="#æ‰¹é‡å¢åˆ æ”¹-bulk" aria-hidden="true">#</a> æ‰¹é‡å¢åˆ æ”¹ bulk</h4><p>Bukæ“ä½œè§£é‡Šå°†æ–‡æ¡£çš„å¢åˆ æ”¹æŸ¥ä¸€äº›åˆ—æ“ä½œï¼Œé€šè¿‡ä¸€æ¬¡è¯·æ±‚å…¨éƒ½åšå®Œã€‚å‡å°‘ç½‘ç»œä¼ è¾“</p><p>æ¬¡æ•°ã€‚</p><p>è¯­æ³•ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /_bulk
<span class="token punctuation">{</span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;metadata&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä¸‹æ“ä½œï¼Œåˆ é™¤5ï¼Œæ–°å¢14ï¼Œä¿®æ”¹2ã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /_bulk
<span class="token punctuation">{</span><span class="token property">&quot;create&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;test8&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;bulk test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ï¼š</p><ol><li><p>åŠŸèƒ½ï¼š</p><ul><li>delete:åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œåªè¦1ä¸ªjsonä¸²å°±å¯ä»¥äº†;</li><li>create:ç›¸å½“äºå¼ºåˆ¶åˆ›å»ºPUT /index/type/id/_create;</li><li>index:æ™®é€šçš„putæ“ä½œï¼Œå¯ä»¥æ˜¯åˆ›å»ºæ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¨é‡æ›¿æ¢æ–‡æ¡£;</li><li>update:æ‰§è¡Œçš„æ˜¯å±€éƒ¨æ›´æ–°partial updateæ“ä½œ;</li></ul></li><li><p>æ ¼å¼ï¼šæ¯ä¸ªjsonä¸èƒ½æ¢è¡Œã€‚ç›¸é‚»jsonå¿…é¡»æ¢è¡Œã€‚</p></li><li><p>éš”ç¦»ï¼šæ¯ä¸ªæ“ä½œäº’ä¸å½±å“ã€‚æ“ä½œå¤±è´¥çš„è¡Œä¼šè¿”å›å…¶å¤±è´¥ä¿¡æ¯ã€‚</p></li><li><p>å®é™…ç”¨æ³•ï¼šbukè¯·æ±‚ä¸€æ¬¡ä¸è¦å¤ªå¤§ï¼Œå¦åˆ™ä¸€ä¸‹ç§¯å‹åˆ°å†…å­˜ä¸­ï¼Œæ€§èƒ½ä¼šä¸‹é™ã€‚æ‰€</p><p>ä»¥ï¼Œä¸€æ¬¡è¯·æ±‚å‡ å¹²ä¸ªæ“ä½œã€å¤§å°åœ¨å‡ Mæ­£å¥½ã€‚</p></li></ol><h3 id="java-api-å®ç°æ–‡æ¡£ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#java-api-å®ç°æ–‡æ¡£ç®¡ç†" aria-hidden="true">#</a> Java API å®ç°æ–‡æ¡£ç®¡ç†</h3><h4 id="elasticsearch-java-api" tabindex="-1"><a class="header-anchor" href="#elasticsearch-java-api" aria-hidden="true">#</a> elasticsearch java API</h4><p>ä¹‹å‰å†™çš„æ•´åˆåšå®¢ã€‚</p><p>CSDNï¼š<a href="https://blog.csdn.net/weixin_43917143/article/details/120235058" target="_blank" rel="noopener noreferrer">(71æ¡æ¶ˆæ¯) spring-boot æ•´åˆelasticsearch 7.x(ç®€å•å…¥é—¨å«giteeæºç )_mengå‰è¡Œçš„åšå®¢-CSDNåšå®¢_springbootæ•´åˆelasticsearch7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç®€ä¹¦ï¼š<a href="https://www.jianshu.com/p/e1f63f2fdc55" target="_blank" rel="noopener noreferrer">spring-boot æ•´åˆelasticsearch 7.x(ç®€å•å…¥é—¨å«giteeæºç ) - ç®€ä¹¦ (jianshu.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="å›¾è§£eså†…éƒ¨æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£eså†…éƒ¨æœºåˆ¶" aria-hidden="true">#</a> å›¾è§£eså†…éƒ¨æœºåˆ¶</h3><h4 id="å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€" aria-hidden="true">#</a> å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€</h4><h5 id="è§†é¢‘" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL/?p=28&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-09-å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h5 id="eså¯¹å¤æ‚åˆ†å¸ƒå¼æœºåˆ¶çš„é€æ˜éšè—ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#eså¯¹å¤æ‚åˆ†å¸ƒå¼æœºåˆ¶çš„é€æ˜éšè—ç‰¹æ€§" aria-hidden="true">#</a> eså¯¹å¤æ‚åˆ†å¸ƒå¼æœºåˆ¶çš„é€æ˜éšè—ç‰¹æ€§</h5><ul><li>åˆ†å¸ƒå¼æœºåˆ¶ï¼šåˆ†å¸ƒå¼æ•°æ®å­˜å‚¨åŠå…±äº«ã€‚</li><li>åˆ†ç‰‡æœºåˆ¶ï¼šæ•°æ®å­˜å‚¨åˆ°å“ªä¸ªåˆ†ç‰‡ï¼Œå‰¯æœ¬æ•°æ®å†™å…¥ã€‚</li><li>é›†ç¾¤å‘ç°æœºåˆ¶ï¼šcluster discoveryã€‚æ–°å¯åŠ¨eså®ä¾‹ï¼Œè‡ªåŠ¨åŠ å…¥é›†ç¾¤ã€‚</li><li>shardè´Ÿè½½å‡è¡¡ï¼šå¤§å‘ˆæ•°æ®å†™å…¥åŠæŸ¥è¯¢ï¼Œesä¼šå°†æ•°æ®å¹³å‡åˆ†é…ã€‚</li><li>shardå‰¯æœ¬ï¼šæ–°å¢å‰¯æœ¬æ•°ï¼Œåˆ†ç‰‡é‡åˆ†é…ã€‚</li></ul><h5 id="elasticsearchçš„å‚ç›´æ‰©å®¹ä¸æ°´å¹³æ‰©å®¹" tabindex="-1"><a class="header-anchor" href="#elasticsearchçš„å‚ç›´æ‰©å®¹ä¸æ°´å¹³æ‰©å®¹" aria-hidden="true">#</a> Elasticsearchçš„å‚ç›´æ‰©å®¹ä¸æ°´å¹³æ‰©å®¹</h5><p>å‚ç›´æ‰©å®¹ï¼šä½¿ç”¨æ›´åŠ å¼ºå¤§çš„æœåŠ¡å™¨æ›¿ä»£è€æœåŠ¡å™¨ã€‚ä½†å•æœºå­˜å‚¨åŠè¿ç®—èƒ½åŠ›æœ‰ä¸Šçº¿ã€‚</p><p>ä¸”æˆæœ¬ç›´çº¿ä¸Šå‡ã€‚å¦‚10tæœåŠ¡å™¨1ä¸‡ã€‚å•ä¸ª10TæœåŠ¡å™¨å¯èƒ½20ä¸‡ã€‚</p><p>æ°´å¹³æ‰©å®¹ï¼šé‡‡è´­æ›´å¤šæœåŠ¡å™¨ï¼ŒåŠ å…¥é›†ç¾¤ã€‚å¤§æ•°æ®ã€‚</p><h5 id="å¢å‡æˆ–å‡å°‘èŠ‚ç‚¹æ—¶çš„æ•°æ®rebalance" tabindex="-1"><a class="header-anchor" href="#å¢å‡æˆ–å‡å°‘èŠ‚ç‚¹æ—¶çš„æ•°æ®rebalance" aria-hidden="true">#</a> å¢å‡æˆ–å‡å°‘èŠ‚ç‚¹æ—¶çš„æ•°æ®rebalance</h5><p>æ–°å¢æˆ–å‡å°‘eså®ä¾‹æ—¶ï¼Œesé›†ç¾¤ä¼šå°†æ•°æ®é‡æ–°åˆ†é…ã€‚</p><h5 id="masterèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#masterèŠ‚ç‚¹" aria-hidden="true">#</a> masterèŠ‚ç‚¹</h5><p>åŠŸèƒ½ï¼š</p><ul><li>åˆ›å»ºåˆ«é™¤èŠ‚ç‚¹ï¼›</li><li>åˆ›å»ºåˆ é™¤ç´¢å¼•ï¼›</li></ul><h5 id="èŠ‚ç‚¹å¯¹ç­‰çš„åˆ†å¸ƒå¼æ¶æ„" tabindex="-1"><a class="header-anchor" href="#èŠ‚ç‚¹å¯¹ç­‰çš„åˆ†å¸ƒå¼æ¶æ„" aria-hidden="true">#</a> èŠ‚ç‚¹å¯¹ç­‰çš„åˆ†å¸ƒå¼æ¶æ„</h5><ul><li>èŠ‚ç‚¹å¯¹ç­‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½æ¥æ”¶æ‰€æœ‰çš„è¯·æ±‚;</li><li>è‡ªåŠ¨è¯·æ±‚è·¯ç”±;</li><li>å“åº”æ”¶é›†;</li></ul><h5 id="ç¤ºä¾‹å›¾" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€.png" alt="å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€" tabindex="0" loading="lazy"><figcaption>å›¾è§£esåˆ†å¸ƒå¼åŸºç¡€</figcaption></figure><h4 id="å›¾è§£åˆ†ç‰‡shardã€å‰¯æœ¬replicaæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£åˆ†ç‰‡shardã€å‰¯æœ¬replicaæœºåˆ¶" aria-hidden="true">#</a> å›¾è§£åˆ†ç‰‡shardã€å‰¯æœ¬replicaæœºåˆ¶</h4><h5 id="è§†é¢‘-1" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-1" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL/?p=29&amp;spm_id_from=pageDriver&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-10-å›¾è§£åˆ†ç‰‡shardã€å‰¯æœ¬replicaæœºåˆ¶_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h5 id="shard-replicaæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#shard-replicaæœºåˆ¶" aria-hidden="true">#</a> shard &amp; replicaæœºåˆ¶</h5><ol><li><p>æ¯ä¸ªindexåŒ…ï¼Œå«ä¸€ä¸ªæˆ–å¤šä¸ªshardã€‚</p></li><li><p>æ¯ä¸ªshardéƒ½æ˜¯ä¸€ä¸ªæœ€å°å·¥ä½œå•å…ƒï¼Œæ‰¿è½½éƒ¨åˆ†æ•°æ®ï¼Œluceneå®ä¾‹ï¼Œå®Œæ•´çš„å»ºç«‹</p><p>ç´¢å¼•å’Œå¤„ç†è¯·æ±‚çš„èƒ½åŠ›ã€‚</p></li><li><p>å¢å‡èŠ‚ç‚¹æ—¶ï¼Œshardä¼šè‡ªåŠ¨åœ¨nodesä¸­è´Ÿè½½å‡è¡¡ã€‚</p></li><li><p>primary shardiå’Œreplica shard,æ¯ä¸ªdocumentè‚¯å®šåªå­˜åœ¨äºæŸä¸€ä¸ªprimary shardä»¥åŠå…¶å¯¹åº”çš„replica shardä¸­ï¼Œä¸å¯èƒ½å­˜åœ¨äºå¤šä¸ªprimary shardã€‚</p></li><li><p>replica shard,æ˜¯primary shardçš„å‰¯æœ¬ï¼Œè´Ÿè´£å®¹é”™ï¼Œä»¥åŠæ‰¿æ‹…è¯»è¯·æ±‚è´Ÿè½½ã€‚</p></li><li><p>primary shardçš„æ•°é‡åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™å°±å›ºå®šäº†ï¼Œreplica shardçš„æ•°é‡å¯ä»¥éš æ—¶ä¿®æ”¹ã€‚</p></li><li><p>primary shardçš„é»˜è®¤æ•°é‡æ˜¯1ï¼Œreplicaé»˜è®¤æ˜¯1ï¼Œé»˜è®¤å…±æœ‰2ä¸ªshard,1ä¸ªprimary shardã€ 1replica shardã€‚</p><p>æ³¨æ„ï¼šes7ä»¥å‰primary shardçš„é»˜è®¤æ•°é‡æ˜¯5ï¼Œreplicaé»˜è®¤æ˜¯1ï¼Œé»˜è®¤æœ‰10ä¸ªshard,5ä¸ªprimary shard,5ä¸ªreplica shardã€‚</p></li><li><p>primary shardä¸èƒ½å’Œè‡ªå·±çš„replica shardiæ”¾åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆå¦åˆ™èŠ‚ç‚¹å®•æœºï¼Œ primary shardå’Œå‰¯æœ¬éƒ½ä¸¢å¤±ï¼Œèµ·ä¸åˆ°å®¹é”™çš„ä½œç”¨)ï¼Œä½†æ˜¯å¯ä»¥å’Œå…¶ä»–primary shardçš„replica shardæ”¾åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p></li></ol><h4 id="å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„" tabindex="-1"><a class="header-anchor" href="#å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„" aria-hidden="true">#</a> å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„</h4><ol><li>å•nodeç¯å¢ƒä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªindex,æœ‰3ä¸ªprimary shard,3ä¸ªreplica shardã€‚</li><li>é›†ç¾¤statusæ˜¯yellowã€‚</li><li>è¿™ä¸ªæ—¶å€™ï¼Œåªä¼šå°†3ä¸ªprimary shard:åˆ†é…åˆ°ä»…æœ‰çš„ä¸€ä¸ªnodeä¸Šå»ï¼Œå¦å¤–3ä¸ª replica shardæ˜¯æ— æ³•åˆ†é…çš„ã€‚</li><li>é›†ç¾¤å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°èŠ‚ç‚¹å®•æœºï¼Œæ•°æ®å…¨éƒ¨ä¸¢å¤±ï¼Œè€Œä¸”é›†ç¾¤ä¸å¯ç”¨ï¼Œ æ— æ³•æ‰¿æ¥ä»»ä½•è¯·æ±‚ã€‚</li></ol><p>è¯·æ±‚åˆ›å»ºç´¢å¼•å¹¶è®¾ç½®åˆ†ç‰‡å€¼ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index1
<span class="token punctuation">{</span>
    <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shards_acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test_index1&quot;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºç´¢å¼•å¹¶è®¾ç½®åˆ†ç‰‡å€¼ï¼Œæ’ä»¶å¯è§†åŒ–æ•ˆæœï¼š</p><figure><img src="/assets/img/ElasticStack/è®¾ç½®åˆ†ç‰‡æ’ä»¶å¯è§†åŒ–æ•ˆæœ.png" alt="è®¾ç½®åˆ†ç‰‡æ’ä»¶å¯è§†åŒ–æ•ˆæœ" tabindex="0" loading="lazy"><figcaption>è®¾ç½®åˆ†ç‰‡æ’ä»¶å¯è§†åŒ–æ•ˆæœ</figcaption></figure><h5 id="ç¤ºä¾‹å›¾-1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-1" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„.png" alt="å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„" tabindex="0" loading="lazy"><figcaption>å›¾è§£å•nodeç¯å¢ƒä¸‹åˆ›å»ºindexæ˜¯ä»€ä¹ˆæ ·å­çš„</figcaption></figure><h4 id="å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica-shardæ˜¯å¦‚ä½•åˆ†é…çš„" tabindex="-1"><a class="header-anchor" href="#å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica-shardæ˜¯å¦‚ä½•åˆ†é…çš„" aria-hidden="true">#</a> å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica shardæ˜¯å¦‚ä½•åˆ†é…çš„</h4><ol><li>replica shardåˆ†é…ï¼š3ä¸ªprimary shard, 3ä¸ªreplica shard, 1 nodeã€‚</li><li>primary ---&gt; replicaåŒæ­¥ã€‚</li><li>è¯»è¯·æ±‚ï¼šprimary/replicaã€‚</li></ol><h5 id="ç¤ºä¾‹å›¾-2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-2" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica_shardæ˜¯å¦‚ä½•åˆ†é…çš„.png" alt="å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica_shardæ˜¯å¦‚ä½•åˆ†é…çš„.png" tabindex="0" loading="lazy"><figcaption>å›¾è§£2ä¸ªnodeç¯å¢ƒä¸‹replica_shardæ˜¯å¦‚ä½•åˆ†é…çš„.png</figcaption></figure><h4 id="å›¾è§£æ¨ªå‘æ‰©å®¹" tabindex="-1"><a class="header-anchor" href="#å›¾è§£æ¨ªå‘æ‰©å®¹" aria-hidden="true">#</a> å›¾è§£æ¨ªå‘æ‰©å®¹</h4><h5 id="è§†é¢‘-2" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-2" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL/?p=31&amp;spm_id_from=pageDriver&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-12-å›¾è§£æ¨ªå‘æ‰©å®¹_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>åˆ†ç‰‡è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œåˆ†ç‰‡å‘ç©ºé—²æœºå™¨è½¬ç§»ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨æ›´å°‘åˆ†ç‰‡ï¼Œç³»ç»Ÿèµ„æºç»™ä¸æ¯ä¸ªåˆ†ç‰‡çš„èµ„æºæ›´å¤šï¼Œæ•´ä½“é›†ç¾¤æ€§èƒ½æé«˜ã€‚</li><li>æ‰©å®¹æé™ï¼šèŠ‚ç‚¹æ•°å¤§äºæ•´ä½“åˆ†ç‰‡æ•°ï¼Œåˆ™å¿…æœ‰ç©ºé—²æœºå™¨ã€‚</li><li>è¶…å‡ºæ‰©å®¹æé™æ—¶ï¼Œå¯ä»¥å¢åŠ å‰¯æœ¬æ•°ï¼Œå¦‚è®¾ç½®å‰¯æœ¬æ•°ä¸º2ï¼Œæ€»å…±3*3=9ä¸ªåˆ†ç‰‡ã€‚9å°æœºå™¨åŒæ—¶è¿è¡Œï¼Œå­˜å‚¨å’Œæœç´¢æ€§èƒ½æ›´å¼ºã€å®¹é”™æ€§æ›´å¥½ã€‚</li><li>å®¹é”™æ€§ï¼šåªè¦ä¸€ä¸ªç´¢å¼•çš„æ‰€æœ‰ä¸»åˆ†ç‰‡åœ¨ï¼Œé›†ç¾¤å°±å°±å¯ä»¥è¿è¡Œã€‚</li></ul><h5 id="ç¤ºä¾‹å›¾-3" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-3" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£æ¨ªå‘æ‰©å®¹.png" alt="å›¾è§£æ¨ªå‘æ‰©å®¹" tabindex="0" loading="lazy"><figcaption>å›¾è§£æ¨ªå‘æ‰©å®¹</figcaption></figure><p>å½“å‰ç¤ºä¾‹å›¾æœ€å¤šå¯æŒ‚æ‰6å°æœºå™¨ï¼Œç¡®ä¿P0ã€P1ã€P2å¯ä»¥å­˜åœ¨å³å¯ï¼Œå³ä¸ºRå‰¯æœ¬å¯ä»¥åœ¨PæŒ‚æ‰æ—¶å­˜åœ¨å¯¹åº”çš„å‰¯æœ¬Rè¿›è¡Œå‡çº§ä¸ºPã€‚</p><h4 id="å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾-replicaå®¹é”™-æ•°æ®æ¢å¤" tabindex="-1"><a class="header-anchor" href="#å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾-replicaå®¹é”™-æ•°æ®æ¢å¤" aria-hidden="true">#</a> å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾ï¼Œreplicaå®¹é”™ï¼Œæ•°æ®æ¢å¤</h4><h5 id="è§†é¢‘-3" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-3" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL?p=32&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-13- å›¾è§£eså®¹é”™æœºåˆ¶ masteré€‰ä¸¾ï¼Œreplicaå®¹é”™ï¼Œæ•°æ®æ¢å¤_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä»¥3åˆ†ç‰‡ï¼Œ2å‰¯æœ¬æ•°ï¼Œ3èŠ‚ç‚¹ä¸ºä¾‹ä»‹ç»ã€‚</p><ul><li>master node:å®•æœºï¼Œè‡ªåŠ¨masterié€‰ä¸¾ï¼Œé›†ç¾¤ä¸ºredã€‚</li><li>replicaå®¹é”™ï¼šæ–°masterå°†replicaæå‡ä¸ºprimary shard,yellowã€‚</li><li>é‡å¯å®•æœºnode,master copy replicaåˆ°è¯¥node,ä½¿ç”¨åŸæœ‰çš„shardå¹¶åŒæ­¥å®•æœºå çš„ä¿®æ”¹ï¼Œgreenã€‚</li></ul><h5 id="ç¤ºä¾‹å›¾-4" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-4" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾ï¼Œreplicaå®¹é”™ï¼Œæ•°æ®æ¢å¤.png" alt="å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾ï¼Œreplicaå®¹é”™ï¼Œæ•°æ®æ¢å¤" tabindex="0" loading="lazy"><figcaption>å›¾è§£eså®¹é”™æœºåˆ¶masterié€‰ä¸¾ï¼Œreplicaå®¹é”™ï¼Œæ•°æ®æ¢å¤</figcaption></figure><h3 id="å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶" aria-hidden="true">#</a> å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶</h3><h4 id="_9-1-æ•°æ®è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_9-1-æ•°æ®è·¯ç”±" aria-hidden="true">#</a> 9.1.æ•°æ®è·¯ç”±</h4><h5 id="è§†é¢‘-4" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-4" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL?p=33&amp;spm_id_from=pageDriver&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-14-æ•°æ®è·¯ç”±_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h5 id="_9-1-1æ–‡æ¡£å­˜å‚¨å¦‚ä½•è·¯ç”±åˆ°ç›¸åº”åˆ†ç‰‡" tabindex="-1"><a class="header-anchor" href="#_9-1-1æ–‡æ¡£å­˜å‚¨å¦‚ä½•è·¯ç”±åˆ°ç›¸åº”åˆ†ç‰‡" aria-hidden="true">#</a> 9.1.1æ–‡æ¡£å­˜å‚¨å¦‚ä½•è·¯ç”±åˆ°ç›¸åº”åˆ†ç‰‡</h5><p>ä¸€ä¸ªæ–‡æ¡£ï¼Œæœ€ç»ˆä¼šè½åœ¨ä¸»åˆ†ç‰‡çš„ä¸€ä¸ªåˆ†ç‰‡ä¸Šï¼Œåˆ°åº•åº”è¯¥åœ¨å“ªä¸€ä¸ªåˆ†ç‰‡ï¼Ÿè¿™å°±æ˜¯æ•°æ®</p><p>è·¯ç”±ã€‚</p><h5 id="_9-1-2è·¯ç”±ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_9-1-2è·¯ç”±ç®—æ³•" aria-hidden="true">#</a> 9.1.2è·¯ç”±ç®—æ³•</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>shard hash<span class="token punctuation">(</span>routing<span class="token punctuation">)</span>%number_of_primary_shards
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“ˆå¸Œå€¼å¯¹ä¸»åˆ†ç‰‡æ•°å–æ¨¡ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>å¯¹ä¸€ä¸ªæ–‡æ¡£ç»è¡Œcrudæ—¶ï¼Œéƒ½ä¼šå¸¦ä¸€ä¸ªè·¯ç”±å€¼routing numberã€‚.é»˜è®¤ä¸ºæ–‡æ¡£id(å¯èƒ½æ˜¯</p><p>æ‰‹åŠ¨æŒ‡å®šï¼Œä¹Ÿå¯èƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆ)ã€‚</p><p>å­˜å‚¨1å·æ–‡æ¡£ï¼Œç»è¿‡å“ˆå¸Œè®¡ç®—ï¼Œå“ˆå¸Œå€¼ä¸º2ï¼Œæ­¤ç´¢å¼•æœ‰3ä¸ªä¸»åˆ†ç‰‡ï¼Œé‚£ä¹ˆè®¡ç®—2%3=2,å°±ç®—å‡ºæ­¤æ–‡æ¡£åœ¨P2åˆ†ç‰‡ä¸Šã€‚</p><p>å†³å®šä¸€ä¸ªdocumentåœ¨å“ªä¸ªshard.ä¸Šï¼Œæœ€é‡è¦çš„ä¸€ä¸ªå€¼å°±æ˜¯routingå€¼ï¼Œé»˜è®¤æ˜¯id,ä¹Ÿ</p><p>å¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼Œç›¸åŒçš„routingå€¼ï¼Œæ¯æ¬¡è¿‡æ¥ï¼Œä»hashå‡½æ•°ä¸­ï¼Œäº§å‡ºçš„hashå€¼ä¸€å®šæ˜¯</p><p>ç›¸åŒçš„ã€‚</p><p>æ— è®ºhashå€¼æ˜¯å‡ ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆæ•°å­—ï¼Œå¯¹number of primary shardsæ±‚ä½™æ•°ï¼Œç»“æœä¸€</p><p>å®šæ˜¯åœ¨0-number._of_primary_shards-1ä¹‹é—´è¿™ä¸ªèŒƒå›´å†…çš„ã€‚0,1,2ã€‚</p><h5 id="_9-1-3æ‰‹åŠ¨æŒ‡å®šrouting-key" tabindex="-1"><a class="header-anchor" href="#_9-1-3æ‰‹åŠ¨æŒ‡å®šrouting-key" aria-hidden="true">#</a> 9.1.3æ‰‹åŠ¨æŒ‡å®šrouting key</h5><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /test_index/_doc/<span class="token number">157</span>?routing=tom
<span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœºæ™¯ï¼šåœ¨ç¨‹åºä¸­ï¼Œæ¶æ„å¸ˆå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå·²æœ‰æ•°æ®çš„ä¸€ä¸ªå±æ€§ä¸ºè·¯ç”±å€¼ï¼Œå¥½å¤„æ˜¯å¯ä»¥</p><p>å®šåˆ¶ä¸€ç±»æ–‡æ¡£æ•°æ®å­˜å‚¨åˆ°ä¸€ä¸ªåˆ†ç‰‡ä¸­ã€‚ç¼ºç‚¹æ˜¯è®¾è®¡ä¸å¥½ï¼Œä¼šé€ æˆæ•°æ®å€¾æ–œã€‚</p><p>æ‰€ä»¥ï¼Œä¸åŒæ–‡æ¡£å°½é‡æ”¾åˆ°ä¸åŒçš„ç´¢å¼•ä¸­ã€‚å‰©ä¸‹çš„äº‹æƒ…äº¤ç»™sé›†ç¾¤è‡ªå·±å¤„ç†ã€‚</p><h5 id="_9-1-4ä¸»åˆ†ç‰‡æ•°æ˜Ÿä¸å¯å˜" tabindex="-1"><a class="header-anchor" href="#_9-1-4ä¸»åˆ†ç‰‡æ•°æ˜Ÿä¸å¯å˜" aria-hidden="true">#</a> 9.1.4ä¸»åˆ†ç‰‡æ•°æ˜Ÿä¸å¯å˜</h5><p>æ¶‰åŠåˆ°ä»¥å¾€æ•°æ®çš„æŸ¥è¯¢æœç´¢ï¼Œæ‰€ä»¥ä¸€æ—¦å»ºç«‹ç´¢å¼•ï¼Œä¸»åˆ†ç‰‡æ•°ä¸å¯å˜ã€‚</p><h5 id="ç¤ºä¾‹å›¾-5" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-5" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶.png" alt="å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>å›¾è§£æ–‡æ¡£å­˜å‚¨æœºåˆ¶</figcaption></figure><h4 id="_9-2-å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_9-2-å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶" aria-hidden="true">#</a> 9.2.å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶</h4><h5 id="è§†é¢‘-5" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-5" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL?p=34&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-15-å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¢åˆ æ”¹å¯ä»¥çœ‹åšupdate,éƒ½æ˜¯å¯¹æ•°æ®çš„æ”¹åŠ¨ã€‚ä¸€ä¸ªæ”¹åŠ¨è¯·æ±‚å‘é€åˆ°esé›†ç¾¤ï¼Œç»å†ä»¥ä¸‹</p><p>å››ä¸ªæ­¥éª¤ï¼š</p><ol><li>å®¢æˆ·ç«¯é€‰æ‹©ä¸ªnodeå‘é€è¯·æ±‚è¿‡å»ï¼Œè¿™ä¸ªnodeå°±æ˜¯coordinating node(åè°ƒèŠ‚ ç‚¹)ã€‚</li><li>coordinating node,å¯¹documentiè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„node(æœ‰ primary shardï¼‰ã€‚</li><li>å®é™…çš„nodeä¸Šçš„primary shardå¤„ç†è¯·æ±‚ï¼Œç„¶åå°†æ•°æ®åŒæ­¥åˆ°replica nodeã€‚</li><li>coordinating node,å¦‚æœå‘ç°primary nodeå’Œæ‰€æœ‰replica nodeéƒ½æå®šä¹‹åï¼Œ å°±è¿”å›å“åº”ç»“æœç»™å®¢æˆ·ç«¯ã€‚</li></ol><h5 id="ç¤ºä¾‹å›¾-6" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-6" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶.png" alt="å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>å›¾è§£æ–‡æ¡£çš„å¢åˆ æ”¹å†…éƒ¨æœºåˆ¶</figcaption></figure><h4 id="_9-3-å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_9-3-å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶" aria-hidden="true">#</a> 9.3.å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶</h4><h5 id="è§†é¢‘-6" tabindex="-1"><a class="header-anchor" href="#è§†é¢‘-6" aria-hidden="true">#</a> è§†é¢‘</h5><p><a href="https://www.bilibili.com/video/BV1Nt4y1m7qL?p=35&amp;vd_source=d6cd8b3f892acbf22f02da2bfa7d95fe" target="_blank" rel="noopener noreferrer">day2-16-å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶_å“”å“©å“”å“©_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ol><li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°ä»»æ„ä¸ªnode,æˆä¸ºcoordinating nodeã€‚</li><li>coordinatingnodeå¯¹documentiè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„node,æ­¤æ—¶ä¼šä½¿ç”¨round-robinéšæœºè½®è¯¢ç®—æ³•ï¼Œåœ¨primary shardä»¥åŠå…¶æ‰€æœ‰replicaä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œè®©è¯»è¯·æ±‚è´Ÿè½½å‡è¡¡ã€‚</li><li>æ¥æ”¶è¯·æ±‚çš„nodeè¿”å›documentç»™coordinatingnodeã€‚</li><li>coordinatingnodeè¿”å›documentç»™å®¢æˆ·ç«¯ã€‚</li><li>ç‰¹æ®Šæƒ…å†µï¼šdocumentå¦‚æœè¿˜åœ¨å»ºç«‹ç´¢lè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½åªæœ‰primary shardæœ‰ï¼Œä»»ä½•ä¸€ä¸ªreplica shardéƒ½æ²¡æœ‰ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå¯¼è‡´æ— æ³•è¯»å–åˆ°document,ä½†æ˜¯documentå®Œæˆç´¢å»ºç«‹ä¹‹åï¼Œprimary shard å’Œ replica shardå°±éƒ½æœ‰äº†ã€‚</li></ol><h5 id="ç¤ºä¾‹å›¾-7" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹å›¾-7" aria-hidden="true">#</a> ç¤ºä¾‹å›¾</h5><figure><img src="/assets/img/ElasticStack/å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶.png" alt="å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>å›¾è§£æ–‡æ¡£çš„æŸ¥è¯¢å†…éƒ¨æœºåˆ¶</figcaption></figure><h4 id="_9-4-bulk-apiå¥‡ç‰¹çš„jsonæ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_9-4-bulk-apiå¥‡ç‰¹çš„jsonæ ¼å¼" aria-hidden="true">#</a> 9.4.bulk apiå¥‡ç‰¹çš„jsonæ ¼å¼</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /_bulk
<span class="token punctuation">{</span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">}</span>\n

<span class="token comment">// æ­£å¸¸çš„jsonåº”è¯¥å¦‚ä¸‹ï¼Œä½†æ˜¯ä¸ç¬¦åˆesè§„èŒƒ</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;create&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;fieldl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;spring&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;create&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;fieldl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;spring&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>bulkä¸­çš„æ¯ä¸ªæ“ä½œéƒ½å¯èƒ½è¦è½¬å‘åˆ°ä¸åŒçš„nodeçš„shardå»æ‰§è¡Œã€‚</p></li><li><p>å¦‚æœé‡‡ç”¨æ¯”è¾ƒè‰¯å¥½çš„jsonæ•°ç»„æ ¼å¼ã€‚</p><p>å…è®¸ä»»æ„çš„æ¢è¡Œï¼Œæ•´ä¸ªå¯è¯»æ€§éå¸¸æ£’ï¼Œè¯»èµ·æ¥å¾ˆçˆ½ï¼Œesæ‹¿åˆ°ç”¨é‚£ç§æ ‡å‡†æ ¼å¼çš„</p><p>jsonä¸²ä»¥åï¼Œè¦æŒ‰ç…§ä¸‹è¿°æµç¨‹å»è¿›è¡Œå¤„ç†ï¼š</p><p>(1) å°†jsonæ•°ç»„è§£æä¸ºJSONArrayå¯¹åƒï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ•´ä¸ªæ•°æ®ï¼Œå°±ä¼šåœ¨å†…å­˜ä¸­å‡º</p><p>ç°ä¸€ä»½ä¸€æ¨¡ä¸€æ ·çš„æ‹·è´ï¼Œä¸€ä»½æ•°æ®æ˜¯jsonæ–‡æœ¬ï¼Œä¸€ä»½æ•°æ®æ˜¯)SONArrayiå¯¹è±¡ï¼›</p><p>(2) è§£æisonæ•°ç»„é‡Œçš„æ¯ä¸ªjson,å¯¹æ¯ä¸ªè¯·æ±‚ä¸­çš„documentè¿›è¡Œè·¯ç”±ï¼›</p><p>(3) ä¸ºè·¯ç”±åˆ°åŒä¸€ä¸ªshard.ä¸Šçš„å¤šä¸ªè¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªè¯·æ±‚æ•°ç»„ã€‚100è¯·æ±‚ä¸­æœ‰10ä¸ªæ˜¯åˆ°P1ï¼› (4) å°†è¿™ä¸ªè¯·æ±‚æ•°ç»„åºåˆ—åŒ–ï¼›</p><p>(5) å°†åºåˆ—åŒ–åçš„è¯·æ±‚æ•°ç»„å‘é€åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šå»ï¼›</p></li><li><p>è€—è´¹æ›´å¤šå†…å­˜ï¼Œæ›´å¤šçš„jvm gciå¼€é”€ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡bulk sizeæœ€ä½³å¤§å°çš„é‚£ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬å»ºè®®è¯´åœ¨å‡ åƒæ¡é‚£æ ·ï¼Œç„¶å</p><p>å¤§å°åœ¨10MBå·¦å³ï¼Œæ‰€ä»¥è¯´ï¼Œå¯æ€•çš„äº‹æƒ…æ¥äº†ã€‚å‡è®¾è¯´ç°åœ¨100ä¸ªbukè¯·æ±‚å‘é€</p><p>åˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå»ï¼Œç„¶åæ¯ä¸ªè¯·æ±‚æ˜¯10MB,100ä¸ªè¯·æ±‚ï¼Œå°±æ˜¯1000MB=1GB,ç„¶</p><p>åæ¯ä¸ªè¯·æ±‚çš„jsonéƒ½copyä¸€ä»½ä¸ºjsonarrayå¯¹è±¡ï¼Œæ­¤æ—¶å†…å­˜ä¸­çš„å ç”¨å°±ä¼šç¿»å€ï¼Œ</p><p>å°±ä¼šå ç”¨2GBçš„å†…å­˜ï¼Œç”šè‡³è¿˜ä¸æ­¢ã€‚å› ä¸ºå¼„æˆjsonarrayä¹‹åï¼Œè¿˜å¯èƒ½ä¼šå¤šæä¸€</p><p>äº›å…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œ2GB+çš„å†…å­˜å ç”¨ã€‚</p><p>å ç”¨æ›´å¤šçš„å†…å­˜å¯èƒ½å°±ä¼šç§¯å‹å…¶ä»–è¯·æ±‚çš„å†…å­˜ä½¿ç”¨é‡ï¼Œæ¯”å¦‚è¯´æœ€é‡è¦çš„æœç´¢è¯·</p><p>æ±‚ï¼Œåˆ†æè¯·æ±‚ï¼Œç­‰ç­‰ï¼Œæ­¤æ—¶å°±å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–è¯·æ±‚çš„æ€§èƒ½æ€¥é€Ÿä¸‹é™ã€‚</p><p>å¦å¤–çš„è¯ï¼Œå ç”¨å†…å­˜æ›´å¤šï¼Œå°±ä¼šå¯¼è‡´jvaè™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶æ¬¡æ•°æ›´å¤šï¼Œæ›´é¢‘ç¹ï¼Œ</p><p>æ¯æ¬¡è¦å›æ”¶çš„åƒåœ¾å¯¹è±¡æ›´å¤šï¼Œè€—è´¹çš„æ—¶é—´æ›´å¤šï¼Œå¯¼è‡´esçš„javaè™šæ‹Ÿæœºåœæ­¢å·¥ä½œçº¿</p><p>ç¨‹çš„æ—¶é—´æ›´å¤šã€‚</p></li><li><p>ç°åœ¨çš„å¥‡ç‰¹æ ¼å¼</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>POST /_bulk
<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token property">&quot;create&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;14&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;test14&quot;</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span><span class="token string">&quot;test_index&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;test_field&quot;</span><span class="token operator">:</span><span class="token string">&quot;bulk test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>\n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(1) ä¸ç”¨å°†å…¶è½¬æ¢ä¸ºjsonå¯¹è±¡ï¼Œä¸ä¼šå‡ºç°å†…å­˜ä¸­çš„ç›¸åŒæ•°æ®çš„æ‹·è´ï¼Œç›´æ¥æŒ‰ç…§æ¢è¡Œç¬¦åˆ‡å‰²jsonï¼›</p><p>(2) å¯¹æ¯ä¸¤ä¸ªä¸€ç»„çš„json,è¯»å–meta,è¿›è¡Œdocumentè·¯ç”±ï¼›</p><p>(3 )ç›´æ¥å°†å¯¹åº”çš„jsonå‘é€åˆ°nodeä¸Šå»ï¼›</p></li><li><p>æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼Œä¸éœ€è¦å°†jsonæ•°ç»„è§£æä¸ºä¸€ä¸ª)SONArrayiå¯¹è±¡ï¼Œå½¢æˆä¸€ä»½å¤§</p><p>æ•°æ®çš„æ‹·è´ï¼Œæµªè´¹å†…å­˜ç©ºé—´ï¼Œå°½å¯èƒ½åœ°ä¿è¯æ€§èƒ½</p></li></ol><h4 id="_10-mappingæ˜ å°„å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#_10-mappingæ˜ å°„å…¥é—¨" aria-hidden="true">#</a> 10.Mappingæ˜ å°„å…¥é—¨</h4><h5 id="_10-1-ä»€ä¹ˆæ˜¯mappingæ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_10-1-ä»€ä¹ˆæ˜¯mappingæ˜ å°„" aria-hidden="true">#</a> 10.1.ä»€ä¹ˆæ˜¯mappingæ˜ å°„</h5><p>æ¦‚å¿µï¼šè‡ªåŠ¨æˆ–æ‰‹åŠ¨ä¸ºindexä¸­çš„_docå»ºç«‹çš„ä¸€ç§æ•°æ®ç»“æ„å’Œç›¸å…³é…ç½®ï¼Œç®€ç§°ä¸º</p><p>mappingæ˜ å°„ã€‚</p><p>æ’å…¥å‡ æ¡æ•°æ®ï¼Œè®©esè‡ªåŠ¨ä¸ºæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç´¢å¼•:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>PUT /website/_doc/<span class="token number">1</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;post_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my first article&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;this is my first article in this website&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author_id&quot;</span><span class="token operator">:</span> <span class="token number">11400</span>
<span class="token punctuation">}</span>

PUT /website/_doc/<span class="token number">2</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;post_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-02&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my second article&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;this is my second article in this website&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author_id&quot;</span><span class="token operator">:</span> <span class="token number">11400</span>
<span class="token punctuation">}</span>

PUT /website/_doc/<span class="token number">3</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;post_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-01-03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my third article&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;this is my third article in this website&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author_id&quot;</span><span class="token operator">:</span> <span class="token number">11400</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹æ¯”æ•°æ®åº“å»ºè¡¨è¯­å¥</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>create table website(
	post_date date,
	title varchar(50),
	content varchar (100),
	author_id int(11)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ¨æ€æ˜ å°„ï¼šdynamic mapping,è‡ªåŠ¨ä¸ºæˆ‘ä»¬å»ºç«‹index,ä»¥åŠå¯¹åº”mappingä¸­åŒ…å«äº†æ¯</p><p>ä¸ªfieldå¯¹åº”çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠå¦‚ä½•åˆ†è¯ç­‰è®¾ç½®ã€‚</p><p>é‡ç‚¹ï¼šæˆ‘ä»¬å½“ç„¶ï¼Œåé¢ä¼šè®²è§£ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨åˆ›å»ºæ•°æ®ä¹‹å‰ï¼Œå…ˆåˆ›å»ºidex,ä»¥åŠå¯¹åº”</p><p>çš„mappingã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>GET /website/_mapping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;website&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;mappings&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;author_id&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;long&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;keyword&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;ignore_above&quot;</span> <span class="token operator">:</span> <span class="token number">256</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;post_date&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;keyword&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;ignore_above&quot;</span> <span class="token operator">:</span> <span class="token number">256</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°è¯•å„ç§æœç´¢</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>GET /website/_search?q=<span class="token number">2019</span> <span class="token number">0</span>æ¡ç»“æœ

GET /website/_search?q=<span class="token number">2019</span><span class="token number">-01</span><span class="token number">-01</span> <span class="token number">1</span>æ¡ç»“æœ

GET /website/_search?q=post_date<span class="token operator">:</span><span class="token number">2019</span><span class="token number">-01</span><span class="token number">-01</span> <span class="token number">1</span>æ¡ç»“æœ

GET /website/_search?q=post_date<span class="token operator">:</span><span class="token number">2019</span> <span class="token number">0</span>æ¡ç»“æœ

GET /website/_search?q-third <span class="token number">1</span>æ¡ç»“æœ

GET /website/_search?q=title<span class="token operator">:</span>third <span class="token number">1</span>æ¡ç»“æœ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœç´¢ç»“æœä¸ºä»€ä¹ˆä¸ä¸€è‡´ï¼Œå› ä¸ºesè‡ªåŠ¨å»ºç«‹mappingçš„æ—¶å€™ï¼Œè®¾ç½®äº†ä¸åŒçš„fieldä¸åŒ</p><p>çš„data typeã€‚</p><p>ä¸åŒçš„data typeçš„åˆ†è¯ã€æœç´¢ç­‰è¡Œä¸ºæ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥å‡ºç°äº†_all fieldå’Œ</p><p>post_date fieldçš„æœç´¢è¡¨ç°å®Œå…¨ä¸ä¸€æ ·ã€‚</p><h4 id="_10-2-ç²¾ç¡®åŒ¹é…ä¸å…¨æ–‡æ£€ç´¢çš„å¯¹åŒ—æ¯”åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_10-2-ç²¾ç¡®åŒ¹é…ä¸å…¨æ–‡æ£€ç´¢çš„å¯¹åŒ—æ¯”åˆ†æ" aria-hidden="true">#</a> 10.2.ç²¾ç¡®åŒ¹é…ä¸å…¨æ–‡æ£€ç´¢çš„å¯¹åŒ—æ¯”åˆ†æ</h4><h5 id="_10-2-1-exact-valueç²¾ç¡®åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#_10-2-1-exact-valueç²¾ç¡®åŒ¹é…" aria-hidden="true">#</a> 10.2.1 exact valueç²¾ç¡®åŒ¹é…</h5><p>2019-01-01, exact value, æœç´¢çš„æ—¶å€™ï¼Œå¿…é¡»è¾“å…¥2019-01-01ï¼Œæ‰èƒ½æœç´¢å‡ºæ¥</p><p>å¦‚æœä½ è¾“å…¥ä¸€ä¸ª01ï¼Œæ˜¯æœç´¢ä¸å‡ºæ¥çš„ã€‚ype=dateæ—¶ï¼Œæ˜¯ç²¾ç¡®åŒ¹é…ã€‚</p><p>select from book where post date=&#39;2019-01-01&#39;</p><h5 id="_10-2-2-full-textå…¨æ–‡æ£€ç´¢" tabindex="-1"><a class="header-anchor" href="#_10-2-2-full-textå…¨æ–‡æ£€ç´¢" aria-hidden="true">#</a> 10.2.2 full textå…¨æ–‡æ£€ç´¢</h5><p>æœç¬”è®°ç”µè„‘â€ï¼Œç¬”è®°æœ¬ç”µè„‘è¯æ¡ä¼šä¸ä¼šå‡ºç°ã€‚</p><p>select*from book where name like&#39;%ç¬”è®°ç”µè„‘%&#39;</p><p>(1)ç¼©å†™vs.å…¨ç§°ï¼šcnvs.china</p><p>(2)æ ¼å¼è½¬åŒ–ï¼šlike liked likes</p><p>(3)å¤§å°å†™ï¼šTom vs tom</p><p>(4)åŒä¹‰è¯ï¼šlike vs love</p><p>2019-01-01,20190101,æœç´¢2019ï¼Œæˆ–è€…01ï¼Œéƒ½å¯ä»¥æœç´¢å‡ºæ¥</p><p>china,æœç´¢cn,ä¹Ÿå¯ä»¥å°†chinaæœç´¢å‡ºæ¥</p><p>likes,æœç´¢ike,ä¹Ÿå¯ä»¥å°†ikesæœç´¢å‡ºæ¥</p><p>Tom,æœç´¢tom,ä¹Ÿå¯ä»¥å°†Tomæœç´¢å‡ºæ¥</p><p>Iike,æœç´¢love,åŒä¹‰è¯ï¼Œä¹Ÿå¯ä»¥å°†ikeæœç´¢å‡ºæ¥</p><p>å°±ä¸æ˜¯è¯´å•çº¯çš„åªæ˜¯åŒ¹é…å®Œæ•´çš„ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯å¯ä»¥å¯¹å€¼è¿›è¡Œæ‹†åˆ†è¯è¯­åï¼ˆåˆ†è¯ï¼‰è¿›</p><p>è¡ŒåŒ¹é…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¼©å†™ã€æ—¶æ€ã€å¤§å°å†™ã€åŒä¹‰è¯ç­‰è¿›è¡ŒåŒ¹é…ã€‚æ·±å…¥NPL,è‡ªç„¶è¯­ä¹‰</p><p>å¤„ç†ã€‚</p><h4 id="_10-3Â·å…¨æ–‡æ£€ç´¢ä¸‹å€’æ’ç´¢å¼•æ ¸å¿ƒåŸç†å¿«é€Ÿæ­ç§˜" tabindex="-1"><a class="header-anchor" href="#_10-3Â·å…¨æ–‡æ£€ç´¢ä¸‹å€’æ’ç´¢å¼•æ ¸å¿ƒåŸç†å¿«é€Ÿæ­ç§˜" aria-hidden="true">#</a> 10.3Â·å…¨æ–‡æ£€ç´¢ä¸‹å€’æ’ç´¢å¼•æ ¸å¿ƒåŸç†å¿«é€Ÿæ­ç§˜</h4><p>doc1 ï¼šI really liked my small dogs,and I think my mom also liked them.</p><p>doc2 ï¼šHe never liked any dogs,so I hope that my mom will not expect me to liked him.</p><h5 id="åˆ†è¯-åˆæ­¥çš„å€’æ’ç´¢å¼•çš„å»ºç«‹" tabindex="-1"><a class="header-anchor" href="#åˆ†è¯-åˆæ­¥çš„å€’æ’ç´¢å¼•çš„å»ºç«‹" aria-hidden="true">#</a> åˆ†è¯ï¼Œåˆæ­¥çš„å€’æ’ç´¢å¼•çš„å»ºç«‹</h5><table><thead><tr><th>term</th><th>doc1</th><th>doc2</th></tr></thead><tbody><tr><td>I</td><td>*</td><td>*</td></tr><tr><td>really</td><td>*</td><td></td></tr><tr><td>liked</td><td>*</td><td>*</td></tr><tr><td>my</td><td>*</td><td>*</td></tr><tr><td>small</td><td>*</td><td></td></tr><tr><td>dogs</td><td>*</td><td></td></tr><tr><td>and</td><td>*</td><td></td></tr><tr><td>think</td><td>*</td><td></td></tr><tr><td>mom</td><td>*</td><td>*</td></tr><tr><td>also</td><td>*</td><td></td></tr><tr><td>them</td><td>*</td><td></td></tr><tr><td>He</td><td></td><td>*</td></tr><tr><td>never</td><td></td><td>*</td></tr><tr><td>any</td><td></td><td>*</td></tr><tr><td>so</td><td></td><td>*</td></tr><tr><td>hope</td><td></td><td>*</td></tr><tr><td>that</td><td></td><td>*</td></tr><tr><td>will</td><td></td><td>*</td></tr><tr><td>not</td><td></td><td>*</td></tr><tr><td>expect</td><td></td><td>*</td></tr><tr><td>me</td><td></td><td>*</td></tr><tr><td>to</td><td></td><td>*</td></tr><tr><td>him</td><td></td><td>*</td></tr></tbody></table><p>æ¼”ç¤ºäº†ä¸€ä¸‹å€’æ’ç´¢å¼•æœ€ç®€å•çš„å»ºç«‹çš„ä¸€ä¸ªè¿‡ç¨‹</p><h5 id="æœç´¢" tabindex="-1"><a class="header-anchor" href="#æœç´¢" aria-hidden="true">#</a> æœç´¢</h5><p>mother like little dog,ä¸å¯èƒ½æœ‰ä»»ä½•ç»“æœ</p><p>mother</p><p>like</p><p>little</p><p>dog</p><p>è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚åŒä¹‰è¯mom\motheråœ¨æˆ‘ä»¬äººç±»çœ‹æ¥æ˜¯ä¸€æ ·ã€‚æƒ³è¿›è¡Œæ ‡</p><p>å‡†åŒ–æ“ä½œã€‚</p><h5 id="é‡å»ºå€’æ’ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#é‡å»ºå€’æ’ç´¢å¼•" aria-hidden="true">#</a> é‡å»ºå€’æ’ç´¢å¼•</h5><p>normalizationæ­£è§„åŒ–ï¼Œå»ºç«‹å€’æ’ç´¢å¼•çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹æ‹†åˆ†å‡º</p><p>çš„å„ä¸ªå•è¯è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œä»¥æå‡åé¢æœç´¢çš„æ—¶å€™èƒ½å¤Ÿæœç´¢åˆ°ç›¸å…³è”çš„æ–‡æ¡£çš„æ¦‚</p><p>ç‡ã€‚</p><p>æ—¶æ€çš„è½¬æ¢ï¼Œå•å¤æ•°çš„è½¬æ¢ï¼ŒåŒä¹‰è¯çš„è½¬æ¢ï¼Œå¤§å°å†™çš„è½¬æ¢</p><p>mom ---&gt; mother</p><p>liked ---&gt; like</p><p>small ---&gt; little</p><p>dogs ---&gt; dog</p><p>é‡æ–°å»ºç«‹å€’æ’ç´¢å¼•ï¼ŒåŠ å…¥normalization,å†æ¬¡ç”¨mother liked little dogæœç´¢ï¼Œå°±å¯ä»¥</p><p>æœç´¢åˆ°äº†ã€‚</p><table><thead><tr><th>term</th><th>doc1</th><th>doc2</th><th>normalization</th></tr></thead><tbody><tr><td>I</td><td>*</td><td>*</td><td></td></tr><tr><td>really</td><td>*</td><td></td><td></td></tr><tr><td>like</td><td>*</td><td>*</td><td>liked ---&gt; like</td></tr><tr><td>my</td><td>*</td><td>*</td><td></td></tr><tr><td>little</td><td>*</td><td></td><td>small ---&gt; little</td></tr><tr><td>dog</td><td>*</td><td></td><td>dogs ---&gt; dog</td></tr><tr><td>and</td><td>*</td><td></td><td></td></tr><tr><td>think</td><td>*</td><td></td><td></td></tr><tr><td>mother</td><td>*</td><td>*</td><td>mom ---&gt; mother</td></tr><tr><td>also</td><td>*</td><td></td><td></td></tr><tr><td>them</td><td>*</td><td></td><td></td></tr><tr><td>He</td><td></td><td>*</td><td></td></tr><tr><td>never</td><td></td><td>*</td><td></td></tr><tr><td>any</td><td></td><td>*</td><td></td></tr><tr><td>so</td><td></td><td>*</td><td></td></tr><tr><td>hope</td><td></td><td>*</td><td></td></tr><tr><td>that</td><td></td><td>*</td><td></td></tr><tr><td>will</td><td></td><td>*</td><td></td></tr><tr><td>not</td><td></td><td>*</td><td></td></tr><tr><td>expect</td><td></td><td>*</td><td></td></tr><tr><td>me</td><td></td><td>*</td><td></td></tr><tr><td>to</td><td></td><td>*</td><td></td></tr><tr><td>him</td><td></td><td>*</td><td></td></tr></tbody></table><h5 id="é‡æ–°æœç´¢" tabindex="-1"><a class="header-anchor" href="#é‡æ–°æœç´¢" aria-hidden="true">#</a> é‡æ–°æœç´¢</h5><p>æœç´¢ï¼šmother liked little dog, å¯¹æœç´¢æ¡ä»¶ç»è¡Œåˆ†è¯normalization</p><p>mother</p><p>liked-ã€‹like</p><p>little</p><p>dog</p><p>doc1å’Œdoc2éƒ½ä¼šæœç´¢å‡ºæ¥ï¼</p><h4 id="_10-4-åˆ†è¯å™¨analyzer" tabindex="-1"><a class="header-anchor" href="#_10-4-åˆ†è¯å™¨analyzer" aria-hidden="true">#</a> 10.4.åˆ†è¯å™¨analyzer</h4><h5 id="_10-4-1-ä»€ä¹ˆæ˜¯åˆ†è¯å™¨analyzer" tabindex="-1"><a class="header-anchor" href="#_10-4-1-ä»€ä¹ˆæ˜¯åˆ†è¯å™¨analyzer" aria-hidden="true">#</a> 10.4.1 ä»€ä¹ˆæ˜¯åˆ†è¯å™¨analyzer</h5><p>ä½œç”¨ï¼šåˆ‡åˆ†è¯è¯­ï¼Œnormalization(æå‡recallå¬å›ç‡)</p><p>ç»™esä¸€æ®µå¥å­ï¼Œç„¶åå°†è¿™æ®µå¥å­æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„å•ä¸ªçš„å•è¯ï¼ŒåŒæ—¶å¯¹æ¯ä¸ªå•è¯è¿›</p><p>è¡Œnormalization(æ—¶æ€è½¬æ¢ï¼Œå•å¤æ•°è½¬æ¢)</p><p>recall,å¬å›ç‡ï¼šæœç´¢çš„æ—¶å€™ï¼Œå¢åŠ èƒ½å¤Ÿæœç´¢åˆ°çš„ç»“æœçš„æ•°é‡</p><p>analyzer 3ä¸ªç»„æˆéƒ¨åˆ†ã€æ­¥éª¤ï¼š</p><ol><li><p>character filter:åœ¨ä¸€æ®µæ–‡æœ¬è¿›è¡Œåˆ†è¯ä¹‹å‰ï¼Œå…ˆè¿›è¡Œé¢„å¤„ç†ï¼Œæ¯”å¦‚è¯´æœ€å¸¸è§çš„å°±</p><p>æ˜¯ï¼Œè¿‡æ»¤htmlæ ‡ç­¾(<code>&lt;span&gt;hello&lt;span&gt;</code>-&gt;hello), &amp;-&gt;and ( l&amp;you ---&gt; I and youï¼‰ã€‚</p></li><li><p>tokenizer:åˆ†è¯ï¼Œhello you and me- --&gt; hello,you,and,meã€‚</p></li><li><p>token filter lowercase stop word synonymom dogs ---&gt; dog,liked ---&gt;</p><p>like,Tom ---&gt; tom,a/the/an-&gt;å¹²æ‰ï¼Œmother ---&gt; mom,small ---&gt; little</p><p>stop word åœç”¨è¯ï¼šäº† çš„ å‘¢ã€‚</p></li></ol><p>ä¸€ä¸ªåˆ†è¯å™¨ï¼Œå¾ˆé‡è¦ï¼Œå°†ä¸€æ®µæ–‡æœ¬è¿›è¡Œå„ç§å¤„ç†ï¼Œæœ€åå¤„ç†å¥½çš„ç»“æœæ‰ä¼šæ‹¿å»å»ºç«‹</p><p>å€’æ’ç´¢å¼•ã€‚</p><h5 id="_10-4-2-å†…ç½®åˆ†è¯å™¨çš„ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_10-4-2-å†…ç½®åˆ†è¯å™¨çš„ä»‹ç»" aria-hidden="true">#</a> 10.4.2 å†…ç½®åˆ†è¯å™¨çš„ä»‹ç»</h5><p>ä¾‹å¥ï¼šSet the shape to semi--transparent by calling set_trans(S)</p><p>standard analyzeræ ‡å‡†åˆ†è¯å™¨ï¼šset,the,shape,to,semi,transparent,,by,calling,set_trans,5(é»˜è®¤çš„æ˜¯standard)</p><p>simple analyzeriç®€å•åˆ†è¯å™¨ï¼šset,the,shape,to,semi,transparent,by,calling,set,trans</p><p>whitespace analyzer Set,the,shape,to,semi-transparent,by,calling,set_trans(5)</p><p>language analyzer(ç‰¹å®šçš„è¯­è¨€çš„åˆ†è¯å™¨ï¼Œæ¯”å¦‚è¯´ï¼Œenglish,è‹±è¯­åˆ†è¯å™¨)ï¼šset,shape,semi,transpar,call,set_tran,5</p><p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š</p><p>[Built-in analyzer reference | Elasticsearch Guide <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.7/analysis-analyzers.html" target="_blank" rel="noopener noreferrer">7.7] | Elastic<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_10-5-query-stringæ ¹æ®å­—æ®µåˆ†è¯ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_10-5-query-stringæ ¹æ®å­—æ®µåˆ†è¯ç­–ç•¥" aria-hidden="true">#</a> 10.5.query stringæ ¹æ®å­—æ®µåˆ†è¯ç­–ç•¥</h4><h5 id="_10-5-1-query-string-åˆ†è¯" tabindex="-1"><a class="header-anchor" href="#_10-5-1-query-string-åˆ†è¯" aria-hidden="true">#</a> 10.5.1 query string:åˆ†è¯</h5><p>query stringå¿…é¡»ä»¥å’Œindexå»ºç«‹æ—¶ç›¸åŒçš„analyzeriè¿›è¡Œåˆ†è¯</p><p>query stringå¯¹exact valueå’Œfull textçš„åŒºåˆ«å¯¹å¾…</p><p>å¦‚ï¼šdate:exact valueç²¾ç¡®åŒ¹é…</p><p>text:full textå…¨æ–‡æ£€ç´¢</p><h5 id="_10-5-2æµ‹è¯•åˆ†è¯å™¨" tabindex="-1"><a class="header-anchor" href="#_10-5-2æµ‹è¯•åˆ†è¯å™¨" aria-hidden="true">#</a> 10.5.2æµ‹è¯•åˆ†è¯å™¨</h5><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
    <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Text to analyze 70&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å“åº”ç»“æœï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;to&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;analyze&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;70&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;NUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/backEnd/ElasticStack/ElasticStack.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><!----><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">å¤©å¤©å¼€å¿ƒ</div><div class="copyright">Copyright Â© 2025 çº¢èŒ¶</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-055e697a.js" defer></script>
  </body>
</html>
